(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{NC86:function(e,t,a){"use strict";a.r(t),a.d(t,"LigatabelleModule",(function(){return D}));var i=a("ofXK"),n=a("3Pt+"),l=a("tyNb"),s=a("btWG"),o=a("th7h"),c=a("fXoL");let r=(()=>{class e{constructor(e){this.currentUserService=e}canActivate(){return this.currentUserService.hasAnyPermisson([o.b.CAN_READ_DEFAULT])}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(o.a))},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac}),e})();var d=a("PEb7");const h={moduleTranslationKey:"WETTKAEMPFE",pageTitleTranslationKey:"WETTKAEMPFE.WETTKAEMPFE.TITLE",navigationCardsConfig:{navigationCards:[]}},g={columns:[{translationKey:"WETTKAEMPFE.LIGATABELLE.TABELLENPLATZ",propertyName:"tabellenplatz",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.MANNSCHAFTNAME",propertyName:"mannschaft_name",width:70,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.MATCHPUNKTE",propertyName:"matchpunkte",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.SATZPUNKTE",propertyName:"satzpunkte",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.SATZPUNKTDIFFERENZ",propertyName:"satzpkt_differenz",width:15,sortable:!1}]};var b=a("nr0C"),u=a("21OO"),L=a("bNux"),p=a("X628"),E=a("Oxnw"),m=a("gQPg"),T=a("w90F"),v=a("3lZk"),f=a("zLSN"),y=a("yljE"),I=a("xOPY"),A=a("/2r1"),w=a("sYmb");const N=function(e){return[e]};let S=(()=>{class e extends d.CommonComponentDirective{constructor(e,t,a,i,n,l){super(),this.router=e,this.route=t,this.notificationService=a,this.veranstaltungsDataProvider=i,this.ligatabelleDataProvider=n,this.ligaDataProviderService=l,this.config=h,this.config_table=g,this.PLACEHOLDER_VAR="Zur Suche Liga-Bezeichnung eingeben...",this.multipleSelections=!0,this.loadingVeranstaltungen=!0,this.loadingLigatabelle=!1,this.tableContent=[]}ngOnInit(){console.log("Bin im Liga"),this.loading=!0,this.providedID=void 0,this.hasID=!1,this.notificationService.discardNotification(),this.route.params.subscribe(e=>{Object(p.c)(e.id)?console.log("no params"):(this.providedID=parseInt(e.id,10),console.log(this.providedID),this.hasID=!0)}),console.log(this.selectedLigaId),this.loadLigen()}changeSelectedLiga(){this.selectedLigen=[],this.hasID&&this.ligaDataProviderService.findById(this.selectedLigaId).then(e=>this.getLigaSuccess(e.payload)).catch(e=>{this.ligen=e.payload}),this.selectedLigen.push(this.selectedLiga),console.log("CurrentLiga: "+this.selectedLiga)}getLigaSuccess(e){console.log("response in getLiga: "+e.name),this.selectedLiga=e}onSelectLiga(e){document.querySelector("#Button").style.display="block",this.selectedLigen=[],this.selectedLigen=e,this.selectedLigen&&this.selectedLigen.length>0&&this.loadTableRows(this.selectedLigen[0].id),this.selectedDTOs=[],this.selectedVeranstaltungId=null,this.onSelect(this.veranstaltungsDataProvider.findByLigaId(this.selectedLigen[0].id)[0])}onSelect(e){document.querySelector("#Button").style.display="block",this.selectedDTOs=[],this.selectedDTOs=e,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVeranstaltungId=this.selectedDTOs[0].id,this.selectedVeranstaltungName=this.selectedDTOs[0].name),this.changeVeranstaltung()}changeVeranstaltung(){this.rowsLigatabelle=[],this.tableContent=[],null!=this.selectedVeranstaltungId&&this.loadLigaTableRows()}loadVeranstaltungen(){this.veranstaltungen=[],this.veranstaltungsDataProvider.findAll().then(e=>{document.querySelector("#Button").style.display="none",this.veranstaltungen=e.payload,this.onSelect(this.veranstaltungen),this.loadingVeranstaltungen=!1}).catch(e=>{this.veranstaltungen=e.payload})}loadLigen(){this.ligen=[],this.ligaDataProviderService.findAll().then(e=>{document.querySelector("#Button").style.display="none",this.ligen=e.payload,this.selectedLiga=e.payload[0],this.selectedLigaId=this.hasID?this.providedID:e.payload[0].id,console.log(this.selectedLigaId),this.changeSelectedLiga(),this.onSelectLiga(this.selectedLigen),this.loadingVeranstaltungen=!1}).catch(e=>{this.ligen=e.payload})}loadLigaTableRows(){this.loadingLigatabelle=!0,this.ligatabelleDataProvider.getLigatabelleVeranstaltung(this.selectedVeranstaltungId).then(e=>this.handleLigatabelleSuccess(e)).catch(e=>this.handleLigatabelleFailure(e))}handleLigatabelleFailure(e){this.rowsLigatabelle=[],this.loadingLigatabelle=!1}ligatabelleLinking(){this.router.navigateByUrl("/wettkaempfe/"+this.selectedVeranstaltungName)}handleLigatabelleSuccess(e){if(this.rowsLigatabelle=[],this.remainingLigatabelleRequests=e.payload.length,e.payload.length<=0)this.loadingLigatabelle=!1;else{for(const t of e.payload){const e=new L.a;e.veranstaltung_id=t.veranstaltung_id,e.veranstaltung_name=t.veranstaltung_name,e.wettkampf_id=t.wettkampf_id,e.wettkampf_tag=t.wettkampf_tag,e.mannschaft_id=t.mannschaft_id,e.mannschaft_name=t.mannschaft_name,e.verein_id=t.verein_id,e.matchpunkte=t.matchpunkte,e.satzpunkte=t.satzpunkte,e.satzpkt_differenz=t.satzpkt_differenz,e.tabellenplatz=t.tabellenplatz,e.id=t.id,e.version=t.version,this.tableContent.push(e)}this.rowsLigatabelle=Object(d.toTableRows)(this.tableContent),this.loadingLigatabelle=!1}}loadTableRows(e){this.loading=!0,this.veranstaltungsDataProvider.findByLigaId(e).then(e=>this.handleLoadTableRowsSuccess(e)).catch(e=>this.handleLoadTableRowsFailure(e))}handleLoadTableRowsFailure(e){this.veranstaltungenInLiga=[],this.loading=!1}handleLoadTableRowsSuccess(e){this.veranstaltungenInLiga=[],this.veranstaltungenInLiga=e.payload,this.onSelect(this.veranstaltungenInLiga),console.log(this.veranstaltungenInLiga),this.loading=!1}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(l.c),c.Jb(l.a),c.Jb(m.c),c.Jb(b.a),c.Jb(u.a),c.Jb(E.a))},e.\u0275cmp=c.Db({type:e,selectors:[["bla-wettkaempfe"]],features:[c.ub],decls:28,vars:31,consts:[[3,"config"],[1,"layout-elements"],[1,"flexChild"],[1,"blackLink"],["id","example",1,"table","table-hover","table-sm","table-responsive-sm","thead-light","table-striped",2,"width","80%"],["selectionListHeight","15em",2,"width","60%","flex-grow","0",3,"items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","selectedItemIds","onSelect"],[2,"width","10%","margin-bottom","3%"],["selectionListHeight","3em",2,"width","10%","flex-grow","0","height","20px",3,"items","optionFieldSelector","selectedItemIds","onSelect"],[1,"row"],[3,"config","rows","loading","onRowEntry"],["id","Button"],[3,"id","onClick"],[1,"col-sm-9"],[1,"invalid-feedback"]],template:function(e,t){1&e&&(c.Ob(0,"bla-common-dialog",0),c.Ob(1,"div",1),c.Ob(2,"bla-row-layout"),c.Ob(3,"div",2),c.Ob(4,"h3"),c.Ob(5,"a",3),c.uc(6),c.Yb(7,"translate"),c.Nb(),c.Nb(),c.Ob(8,"table",4),c.Ob(9,"bla-quicksearch-list",5),c.Vb("onSelect",(function(e){return t.onSelectLiga(e)})),c.Nb(),c.Nb(),c.Ob(10,"table",6),c.Ob(11,"bla-selectionlist",7),c.Vb("onSelect",(function(e){return t.onSelect(e)})),c.Nb(),c.Nb(),c.Nb(),c.Ob(12,"div"),c.Ob(13,"h5"),c.Ob(14,"a",3),c.uc(15),c.Yb(16,"translate"),c.Nb(),c.Nb(),c.Ob(17,"div",8),c.Ob(18,"h5"),c.Ob(19,"bla-data-table",9),c.Vb("onRowEntry",(function(){return t.ligatabelleLinking()})),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Ob(20,"div",10),c.Ob(21,"bla-button",11),c.Vb("onClick",(function(){return t.ligatabelleLinking()})),c.uc(22),c.Yb(23,"translate"),c.Nb(),c.Nb(),c.Ob(24,"div",12),c.Ob(25,"div",13),c.uc(26),c.Yb(27,"translate"),c.Nb(),c.Nb(),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.dc("config",t.config),c.xb(6),c.vc(c.Zb(7,19,"WETTKAEMPFE.TITEL.VERANSTALTUNG")),c.xb(3),c.dc("items",t.ligen)("loading",t.loadingVeranstaltungen)("multipleSelections",!t.multipleSelections)("placeholderTranslationKey",t.PLACEHOLDER_VAR)("optionFieldSelector","name")("selectedItemIds",c.hc(27,N,t.selectedLigaId)),c.xb(2),c.dc("items",t.veranstaltungenInLiga)("optionFieldSelector","sportjahr")("selectedItemIds",c.hc(29,N,t.selectedVeranstaltungId)),c.xb(4),c.vc(c.Zb(16,21,"WETTKAEMPFE.LIGATABELLE.TITEL")),c.xb(4),c.dc("config",t.config_table)("rows",t.rowsLigatabelle)("loading",t.loadingLigatabelle),c.xb(2),c.dc("id","regionSaveButton"),c.xb(1),c.xc(" ",c.Zb(23,23,"WETTKAEMPFE.LIGATABELLE.LINKDESCRIPTION")," ",t.selectedVeranstaltungName," "),c.xb(4),c.wc(" ",c.Zb(27,25,"MANAGEMENT.REGION_DETAIL.FORM.REGION_TYP.ERROR")," "))},directives:[T.a,v.a,f.a,y.a,I.a,A.a],pipes:[w.d],styles:[""]}),e})();const O=[{path:"",component:S,canActivate:[r],pathMatch:"full"},{path:"/:id",component:S,canActivate:[r],pathMatch:"full"}];let D=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},providers:[r],imports:[[i.c,l.g.forChild(O),s.SharedModule,n.k]]}),e})()}}]);