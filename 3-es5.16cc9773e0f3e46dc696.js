!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{wQCW:function(t,r,o){"use strict";o.r(r),o.d(r,"VereineModule",(function(){return P}));var l,c,u=o("ofXK"),d=o("3Pt+"),f=o("tyNb"),h=o("FpXt"),p=o("tY1a"),g={moduleTranslationKey:"VEREINE",pageTitleTranslationKey:"VEREINE.VEREINE.TITLE",navigationCardsConfig:{navigationCards:[]}},y={columns:[{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.VERANSTALTUNG",propertyName:"veranstaltung_name",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.WETTKAMPF",propertyName:"wettkampfTag",width:20},{translationKey:"TABLE.PLACE",propertyName:"wettkampfOrt",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.MANNSCHAFT",propertyName:"mannschaftsName",width:20}],actions:{actionTypes:[p.a.MAP],width:6}},b=o("X628"),v=o("FlTZ"),m=o("PEb7"),w=(o("YfBl"),o("ny2l")),E=o("sQ0O"),V=o("nr0C"),T=function e(t,n,i,a){s(this,e),this.veranstaltung_name=t,this.wettkampfTag=n,this.wettkampfOrt=i,this.mannschaftsName=a,this.id=1,this.version=1},O=o("gQPg"),D=o("fXoL"),I=o("U9hD"),S=o("hIfO"),k=o("zLSN"),R=o("xOPY"),N=function(e){return[e]},A=((l=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,t);var r,o,l,c=a(u);function u(e,t,n,i,a,r,o){var l;return s(this,u),(l=c.call(this)).router=e,l.route=t,l.notificationService=n,l.wettkampfDataProvider=i,l.veranstaltungsDataProvider=a,l.vereinDataProvider=r,l.mannschaftsDataProvider=o,l.PLACEHOLDER_VAR="Bitte Verein eingeben...",l.config=g,l.config_table=y,l.multipleSelections=!0,l.loadingVereine=!0,l.loadingTable=!1,l.tableContent=[],l}return r=u,(o=[{key:"ngOnInit",value:function(){var e=this;console.log("Bin in Vereine"),this.currentVerein=null,this.providedID=null,this.hasID=!1,this.loading=!0,this.notificationService.discardNotification(),this.route.params.subscribe((function(t){Object(b.c)(t.id)||(e.hasID=!0,e.providedID=parseInt(t.id,10),console.log("This.providedID: "+e.providedID))})),this.loadVereine()}},{key:"changeSelectedVerein",value:function(){var e=this;this.selectedVereine=[],this.vereinDataProvider.findById(this.selectedVereinsId).then((function(t){return e.getVereinSuccsess(t.payload)})).catch((function(e){return console.log("Fehler im Verein laden")}))}},{key:"getVereinSuccsess",value:function(e){console.log("response in getVerein: "+e.name),this.currentVerein=e,this.selectedVereine.push(this.currentVerein),console.log("CurrentVerein: "+this.currentVerein)}},{key:"onSelect",value:function(e){this.selectedDTOs=[],this.selectedDTOs=e,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVereinsId=this.selectedDTOs[0].id),this.changeVerein()}},{key:"changeVerein",value:function(){this.rows=[],this.tableContent=[],null!=this.selectedVereinsId&&this.loadTableRows()}},{key:"getSelectedDTO",value:function(){if(Object(b.a)(this.selectedDTOs))return"";console.log("Auswahllisten: selectedDTO = "+JSON.stringify(this.selectedDTOs));var e=[];return this.selectedDTOs.forEach((function(t){e.push(t.name)})),e.join(", ")}},{key:"onView",value:function(e){}},{key:"onEdit",value:function(e){}},{key:"onDelete",value:function(e){}},{key:"onMap",value:function(e){var t;t=e.wettkampfOrt.split(", ",5),window.open("https://www.google.de/maps/place/"+t[0]+"+"+t[1]+"+"+t[2])}},{key:"loadVereine",value:function(){var e=this;this.vereine=[],this.vereinDataProvider.findAll().then((function(t){e.vereine=t.payload.sort(),e.loadingVereine=!1,e.selectedVereinsId=e.hasID?e.providedID:t.payload[0].id,console.log("This.selectedVereinsID: "+e.selectedVereinsId),e.changeSelectedVerein(),e.onSelect(e.selectedVereine)})).catch((function(t){e.vereine=t.payload}))}},{key:"loadTableRows",value:function(){var e=this;this.loadingTable=!0,this.mannschaftsDataProvider.findAllByVereinsId(this.selectedVereinsId).then((function(t){return e.handleFindMannschaftenSuccess(t)})).catch((function(t){return e.handleFindMannschaftenFailure(t)}))}},{key:"handleFindMannschaftenFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindMannschaftenSuccess",value:function(e){var t,n=this,i=function(){var i=n.selectedDTOs[0].name+" "+e.payload[t].nummer+". Mannschaft";n.wettkampfDataProvider.findAllWettkaempfeByMannschaftsId(e.payload[t].id).then((function(e){return n.handleFindWettkaempfeSuccess(e,i)})).catch((function(e){return n.handleFindWettkaempfeFailure(e)}))};for(this.rows=[],this.remainingMannschaftsRequests=e.payload.length,e.payload.length<=0&&(this.loadingTable=!1),t=0;t<e.payload.length;t++)i()}},{key:"handleFindWettkaempfeFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindWettkaempfeSuccess",value:function(t,n){var i=this;console.log("success"),this.remainingRequests=t.payload.length,this.remainingMannschaftsRequests-=1,t.payload.length<=0&&(this.loadingTable=!1);var a,r=e(t.payload);try{var o=function(){var e=a.value,t=e.wettkampfTag+". Wettkampftag",r=e.wettkampfOrt;i.veranstaltungsDataProvider.findById(e.wettkampfVeranstaltungsId).then((function(e){return i.handleFindVeranstaltungSuccess(e,n,t,r)})).catch((function(e){return i.handleFindVeranstaltungFailure(e)}))};for(r.s();!(a=r.n()).done;)o()}catch(l){r.e(l)}finally{r.f()}if(0===t.payload.length){var s=new T("","","",n);this.tableContent.push(s)}this.remainingMannschaftsRequests<=0&&(this.rows=Object(m.toTableRows)(this.tableContent))}},{key:"handleFindVeranstaltungFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindVeranstaltungSuccess",value:function(e,t,n,i){console.log("Content:"+e.payload.name+n+t);var a=new T(e.payload.name,n,i,t);this.tableContent.push(a),this.remainingRequests-=1,this.remainingRequests<=0&&(this.rows=Object(m.toTableRows)(this.tableContent),this.tableContent=[],this.loadingTable=!1)}}])&&n(r.prototype,o),l&&n(r,l),u}(m.CommonComponentDirective)).\u0275fac=function(e){return new(e||l)(D.Jb(f.c),D.Jb(f.a),D.Jb(O.c),D.Jb(E.a),D.Jb(V.a),D.Jb(v.a),D.Jb(w.a))},l.\u0275cmp=D.Db({type:l,selectors:[["bla-vereine"]],features:[D.ub],decls:8,vars:13,consts:[[3,"config"],[1,"row"],["selectionListHeight","15em",2,"width","50%","flex-grow","0",3,"selectedItemIds","items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","onSelect"],[3,"config","loading","rows","onMapEntry"]],template:function(e,t){1&e&&(D.Ob(0,"bla-navigation-dialog",0),D.Ob(1,"div",1),D.Ob(2,"bla-col-layout"),D.Ob(3,"h2"),D.uc(4),D.Nb(),D.Ob(5,"bla-quicksearch-list",2),D.Vb("onSelect",(function(e){return t.onSelect(e)})),D.Nb(),D.Nb(),D.Nb(),D.Ob(6,"div",1),D.Ob(7,"bla-data-table",3),D.Vb("onMapEntry",(function(e){return t.onMap(e)})),D.Nb(),D.Nb(),D.Nb()),2&e&&(D.dc("config",t.config),D.xb(4),D.wc("Vereinsauswahl: ",t.getSelectedDTO(),""),D.xb(1),D.dc("selectedItemIds",D.hc(11,N,t.selectedVereinsId))("items",t.vereine)("loading",t.loadingVereine)("multipleSelections",!t.multipleSelections)("placeholderTranslationKey",t.PLACEHOLDER_VAR)("optionFieldSelector","name"),D.xb(2),D.dc("config",t.config_table)("loading",t.loadingTable)("rows",t.rows))},directives:[I.a,S.a,k.a,R.a],styles:[".row[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column}"]}),l),F=[{path:"",pathMatch:"full",component:A},{path:"/:id",pathMatch:"full",component:A}],P=((c=function e(){s(this,e)}).\u0275mod=D.Hb({type:c}),c.\u0275inj=D.Gb({factory:function(e){return new(e||c)},imports:[[u.c,f.g.forChild(F),h.a,d.k]]}),c)}}])}();