(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{UUi9:function(t,e,n){"use strict";n.r(e),n.d(e,"SportjahresplanModule",(function(){return Ut}));var i=n("ofXK"),s=n("3Pt+"),a=n("tyNb"),c=n("FpXt"),h=n("PEb7"),r=n("tY1a");const l={moduleTranslationKey:"SPORTJAHRESPLAN",pageTitleTranslationKey:"SPORTJAHRESPLAN.SPORTJAHRESPLAN.TITLE",navigationCardsConfig:{navigationCards:[]}},o={columns:[{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.CDAY",propertyName:"wettkampfTag",width:20},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.DATE",propertyName:"wettkampfDatum",width:15},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.TIME",propertyName:"wettkampfBeginn",width:15},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.PLACE",propertyName:"wettkampfOrt",width:40}],actions:{actionTypes:[r.a.VIEW,r.a.MAP],width:6}},u={columns:[{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.NUMMER",propertyName:"nr",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.SCHEIBE",propertyName:"scheibenNummer",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.MANNSCHAFT",propertyName:"mannschaftName",width:20},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.BEGEGNUNG",propertyName:"begegnung",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.MATCHPUNKTE",propertyName:"matchpunkte",type:5,currentSortOrder:1,width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.SATZPUNKTE",propertyName:"satzpunkte",width:5}],actions:{actionTypes:[r.a.EDIT],width:6}};var b=n("YfBl"),d=n("nr0C"),m=n("sQ0O"),f=n("BMmu"),p=n("X628");class g{constructor(t,e,n,i,s,a,c,h,r,l,o,u,b,d,m,f,p){this.id=t||null,this.mannschaftId=e||null,this.mannschaftName=n||"Mannschaft 1",this.wettkampfId=i||null,this.nr=s||null,this.begegnung=a||null,this.scheibenNummer=c||null,this.matchpunkte=h,this.satzpunkte=r,this.strafPunkteSatz1=l||0,this.strafPunkteSatz2=o||0,this.strafPunkteSatz3=u||0,this.strafPunkteSatz4=b||0,this.strafPunkteSatz5=d||0,this.passen=m||[],this.wettkampfTyp=p,this.wettkampfTag=f}static copyFrom(t={}){const e=new g;return e.id=t.id>=0?t.id:null,e.version=t.version>=0?t.version:null,e.mannschaftId=t.mannschaftId>=0?t.mannschaftId:null,e.mannschaftName=t.mannschaftName||"",e.wettkampfId=t.wettkampfId>=0?t.wettkampfId:null,e.wettkampfTag=t.wettkampfTag>=0?t.wettkampfTag:null,e.wettkampfTyp=t.wettkampfTyp||"",e.nr=t.nr>=0?t.nr:null,e.begegnung=t.begegnung>=0?t.begegnung:null,e.scheibenNummer=t.scheibenNummer>=0?t.scheibenNummer:null,e.matchpunkte=t.matchpunkte>=0?t.matchpunkte:null,e.satzpunkte=t.satzpunkte>=0?t.satzpunkte:null,e.strafPunkteSatz1=t.strafPunkteSatz1>=0?t.strafPunkteSatz1:null,e.strafPunkteSatz2=t.strafPunkteSatz2>=0?t.strafPunkteSatz2:null,e.strafPunkteSatz3=t.strafPunkteSatz3>=0?t.strafPunkteSatz3:null,e.strafPunkteSatz4=t.strafPunkteSatz4>=0?t.strafPunkteSatz4:null,e.strafPunkteSatz5=t.strafPunkteSatz5>=0?t.strafPunkteSatz5:null,Object(p.a)(t.passen)?e.passen=null:(e.passen=new Array,t.passen.forEach(t=>{e.passen.push(t)})),e}}class N{constructor(t,e,n,i,s,a,c,h,r,l,o,u,b,d){this.id=t||null,this.mannschaftId=e||null,this.mannschaftName=n||"Mannschaft 1",this.wettkampfId=i||null,this.nr=s,this.begegnung=a,this.scheibenNummer=c||null,this.sumSatz=h||[5],this.matchpunkte=r,this.satzpunkte=l,this.fehlerpunkte=o||[],this.schuetzen=u||[],this.wettkampfTyp=d,this.wettkampfTag=b}}class O{constructor(t,e,n,i,s,a,c,h,r){this.id=t||null,this.matchId=e||null,this.mannschaftId=n||null,this.wettkampfId=i||null,this.matchNr=s||null,this.lfdNr=a||null,this.dsbMitgliedId=c||null,this.ringzahl=h||[],this.rueckennummer=r||null}}class S{constructor(t,e,n,i,s,a,c,h,r,l,o,u,b,d){this.id=t||null,this.matchId=e||null,this.mannschaftId=n||null,this.wettkampfId=i||null,this.matchNr=s||null,this.lfdNr=a||null,this.dsbMitgliedId=c||null,this.ringzahlPfeil1=h||null,this.ringzahlPfeil2=r||null,this.ringzahlPfeil3=l||null,this.ringzahlPfeil4=o||null,this.ringzahlPfeil5=u||null,this.ringzahlPfeil6=b||null,this.rueckennummer=d||null}}class z{static passeToDO(t){return new S(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,t.ringzahl[0],t.ringzahl[1],t.ringzahl[2],t.ringzahl[3],t.ringzahl[4],t.ringzahl[5],t.rueckennummer)}static passeToDTO(t){return new O(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,[t.ringzahlPfeil1,t.ringzahlPfeil2,t.ringzahlPfeil3,t.ringzahlPfeil4,t.ringzahlPfeil5,t.ringzahlPfeil6],t.rueckennummer)}}function T(t){const e=[];return t.forEach(t=>e.push(function(t){return g.copyFrom(t)}(t))),e}class P{static matchToDO(t){const e=[];let n=[];if(t.passen.length>0){const i=new Map;e[0]=[],e[1]=[],e[2]=[],n=[0,0,0,0,0];for(const e of t.passen){const t=z.passeToDO(e);if(i.has(e.rueckennummer))i.get(e.rueckennummer).push(t);else{const n=[];n.push(t),i.set(e.rueckennummer,n)}}console.log("schuetzenPasseMap",i);let s=0;i.forEach((t,n)=>{e[s]=t,s++}),console.log("schuetzen",e);for(let t=0;t<e[0].length;t++)for(const i of e)t<i.length&&(n[t]+=i[t].ringzahlPfeil1+i[t].ringzahlPfeil2);for(let n=0;n<3;n++){const i=e[n].length;for(let s=0;s<5-i;s++)e[n].push(new S(null,t.id,t.mannschaftId,t.wettkampfId,t.nr,s+1));e[n]=e[n].sort((t,e)=>t.lfdNr-e.lfdNr)}}return new N(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,n,t.matchpunkte,t.satzpunkte,[t.strafPunkteSatz1,t.strafPunkteSatz2,t.strafPunkteSatz3,t.strafPunkteSatz4,t.strafPunkteSatz5],e,t.wettkampfTag,t.wettkampfTyp)}static matchToDTO(t){const e=[];for(const n of t.schuetzen)for(const t of n)t.rueckennummer=n[0].rueckennummer,e.push(z.passeToDTO(t));return new g(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,t.matchpunkte,t.satzpunkte,t.fehlerpunkte[0],t.fehlerpunkte[1],t.fehlerpunkte[2],t.fehlerpunkte[3],t.fehlerpunkte[4],e,t.wettkampfTag,t.wettkampfTyp)}}var E=n("fXoL");let k=(()=>{class t extends b.DataProviderService{constructor(t){super(),this.restClient=t,this.serviceSubUrl="v1/match"}get(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).build()).then(t=>{const n=P.matchToDO(t);e({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}create(t){const e=P.matchToDTO(t);return new Promise((t,n)=>{this.restClient.POST(this.getUrl(),e).then(e=>{const n=P.matchToDO(e);t({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}update(t){const e=P.matchToDTO(t);return new Promise((t,n)=>{this.restClient.PUT(this.getUrl(),e).then(e=>{const n=P.matchToDO(e);t({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}findAllWettkampfMatchesAndNamesById(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path("findAllWettkampfMatchesAndName/wettkampfid="+t).build()).then(t=>{e({result:b.RequestResult.SUCCESS,payload:T(t)})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}next(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).path("next").build()).then(t=>{e({result:b.RequestResult.SUCCESS,payload:t})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}pair(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).path("pair").build()).then(t=>{e({result:b.RequestResult.SUCCESS,payload:t})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}pairToFollow(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).path("pairToFollow").build()).then(t=>{e({result:b.RequestResult.SUCCESS,payload:t})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(b.RestClient))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=n("9VTN"),C=n("gQPg"),I=n("AytR"),M=n("w90F"),w=n("hIfO"),R=n("zLSN"),x=n("xOPY"),y=n("xRjW"),A=n("/2r1"),D=n("sYmb");let _=(()=>{class t extends h.CommonComponentDirective{constructor(t,e,n,i,s,a,c){super(),this.router=t,this.route=e,this.notificationService=n,this.veranstaltungsDataProvider=i,this.wettkampfDataProvider=s,this.matchDataProvider=a,this.matchProvider=c,this.config=l,this.config_table=o,this.config_table_match=u,this.PLACEHOLDER_VAR="Veranstaltung ausw\xe4hlen...",this.pdf=new Blob,this.multipleSelections=!0,this.loadingVeranstaltungen=!0,this.loadingWettkampfe=!1,this.loadingMatch=!1,this.tableContent=[],this.tableContentMatch=[]}ngOnInit(){this.loadVeranstaltungen(),this.visible=!1}onSelect(t){this.selectedDTOs=[],this.selectedDTOs=t,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVeranstaltungId=this.selectedDTOs[0].id),this.veranstaltungsDataProvider.findById(this.selectedVeranstaltungId).then(t=>{this.currentVeranstaltungName=t.payload.name+" "+t.payload.sportjahr}).catch(()=>{this.currentVeranstaltungName=""}),this.rows=[],this.tableContent=[],null!=this.selectedVeranstaltungId&&this.loadTableRows()}onView(t){t.id>=0&&(this.selectedWettkampfId=t.id,this.selectedWettkampf=t.id.toString(),document.getElementById("WettkampfTitle").innerText=this.currentVeranstaltungName+" - "+t.wettkampfTag+". Wettkampftag",this.visible=!0,this.tableContentMatch=[],this.matchProvider.findAllWettkampfMatchesAndNamesById(this.selectedWettkampfId).then(t=>this.handleFindMatchSuccess(t)).catch(t=>this.handleFindMatchFailure(t)))}onMap(t){let e;e=t.wettkampfOrt.split(", ",5),window.open("https://www.google.de/maps/place/"+e[0]+"+"+e[1]+"+"+e[2])}onButtonTabletClick(){this.router.navigateByUrl("/sportjahresplan/tabletadmin/"+this.selectedWettkampf)}onButtonDownload(t){return(new b.UriBuilder).fromPath(I.a.backendBaseUrl).path("v1/download").path(t).path("?wettkampfid="+this.selectedWettkampf).build()}isDisabled(){return""===this.selectedWettkampf}onEdit(t){t.id>=0&&(this.selectedMatchId=t.id,this.matchProvider.pair(this.selectedMatchId).then(t=>{2===t.payload.length&&this.router.navigate(["/sportjahresplan/schusszettel/"+t.payload[0]+"/"+t.payload[1]])}))}loadVeranstaltungen(){this.veranstaltungen=[],this.selectedWettkampf="",this.selectedWettkampfId=null,this.veranstaltungsDataProvider.findAll().then(t=>{this.veranstaltungen=t.payload,this.loadingVeranstaltungen=!1}).catch(t=>{this.veranstaltungen=t.payload})}loadTableRows(){this.loadingWettkampfe=!0,this.selectedWettkampf="",this.selectedWettkampfId=null,this.wettkampfDataProvider.findAllByVeranstaltungId(this.selectedVeranstaltungId).then(t=>this.handleFindWettkampfSuccess(t)).catch(t=>this.handleFindWettkampfFailure(t))}handleFindWettkampfFailure(t){this.rows=[],this.loadingWettkampfe=!1}handleFindWettkampfSuccess(t){this.rows=[],this.remainingWettkampfRequests=t.payload.length,t.payload.length<=0&&(this.loadingWettkampfe=!1);for(const e of t.payload){const t=new v.a;t.wettkampfOrt=e.wettkampfOrt,t.wettkampfBeginn=e.wettkampfBeginn,t.wettkampfTag=e.wettkampfTag,t.wettkampfDatum=e.wettkampfDatum,t.id=e.id,t.wettkampfVeranstaltungsId=e.wettkampfVeranstaltungsId,t.version=e.version,this.tableContent.push(t)}this.rows=Object(h.toTableRows)(this.tableContent),this.loadingWettkampfe=!1}handleFindMatchFailure(t){this.matchRows=[],this.loadingMatch=!1}handleFindMatchSuccess(t){this.matchRows=[],this.remainingMatchRequests=t.payload.length,t.payload.length<=0&&(this.loadingMatch=!1);for(const e of t.payload){const t=new N;t.id=e.id,t.nr=e.nr,t.begegnung=e.begegnung,t.scheibenNummer=e.scheibenNummer,t.mannschaftName=e.mannschaftName,t.matchpunkte=e.matchpunkte,t.satzpunkte=e.satzpunkte,t.version=e.version,this.tableContentMatch.push(t)}this.matchRows=Object(h.toTableRows)(this.tableContentMatch),this.loadingMatch=!1}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(a.c),E.Jb(a.a),E.Jb(C.c),E.Jb(d.a),E.Jb(m.a),E.Jb(f.a),E.Jb(k))},t.\u0275cmp=E.Db({type:t,selectors:[["bla-sportjahresplan"]],features:[E.ub],decls:53,vars:32,consts:[[3,"config"],[1,"layout-elements"],[1,"flexChild"],["routerLink","/Sportjahresplan",1,"blackLink"],["id","example",1,"table","table-hover","table-sm","table-responsive-sm","thead-light","table-striped",2,"width","80%"],["selectionListHeight","15em",2,"width","40%","flex-grow","0",3,"items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","onSelect"],[1,"row"],[1,"overview-dialog-content"],[3,"config","rows","loading","onViewEntry","onMapEntry"],["id","WettkampfTitle"],[3,"id","downloadUrl","fileName","disabled"],[3,"disabled","click"],[3,"config","rows","loading","onEditEntry"]],template:function(t,e){1&t&&(E.Ob(0,"bla-common-dialog",0),E.Ob(1,"div",1),E.Ob(2,"bla-col-layout"),E.Ob(3,"div",2),E.Ob(4,"h3"),E.Ob(5,"a",3),E.uc(6),E.Yb(7,"translate"),E.Nb(),E.Nb(),E.Ob(8,"table",4),E.Ob(9,"bla-quicksearch-list",5),E.Vb("onSelect",(function(t){return e.onSelect(t)})),E.Nb(),E.Nb(),E.Nb(),E.Ob(10,"div"),E.Ob(11,"h3"),E.uc(12," Wettkampftage der Veranstaltung "),E.Nb(),E.Ob(13,"div",6),E.Ob(14,"section",7),E.Ob(15,"bla-data-table",8),E.Vb("onViewEntry",(function(t){return e.onView(t)}))("onMapEntry",(function(t){return e.onMap(t)})),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Ob(16,"bla-col-layout"),E.Kb(17,"h3",9),E.Nb(),E.Ob(18,"bla-col-layout"),E.Ob(19,"h3"),E.Kb(20,"BR"),E.uc(21,"Ligatabelle Vorbereitung "),E.Kb(22,"BR"),E.uc(23,"\xa0"),E.Nb(),E.Nb(),E.Ob(24,"bla-col-layout"),E.Ob(25,"div"),E.Ob(26,"bla-download-button",10),E.uc(27,"Setzliste "),E.Nb(),E.Nb(),E.Ob(28,"div"),E.Ob(29,"bla-download-button",10),E.uc(30,"Schusszettel "),E.Nb(),E.Nb(),E.Ob(31,"div"),E.Ob(32,"bla-download-button",10),E.uc(33,"Bogenkontrollliste "),E.Nb(),E.Nb(),E.Ob(34,"div"),E.Ob(35,"bla-download-button",10),E.uc(36,"Meldezettel "),E.Nb(),E.Nb(),E.Ob(37,"div"),E.Ob(38,"bla-button",11),E.Vb("click",(function(){return e.onButtonTabletClick()})),E.uc(39,"Setup Tablets >"),E.Nb(),E.Nb(),E.Nb(),E.Ob(40,"bla-col-layout"),E.Kb(41,"BR"),E.Ob(42,"h3"),E.Kb(43,"BR"),E.uc(44,"Ligatabelle Durchf\xfchrung "),E.Kb(45,"BR"),E.uc(46,"\xa0"),E.Nb(),E.Kb(47,"BR"),E.Nb(),E.Ob(48,"bla-col-layout"),E.Ob(49,"div",6),E.Ob(50,"section",7),E.Ob(51,"bla-data-table",12),E.Vb("onEditEntry",(function(t){return e.onEdit(t)})),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Kb(52,"router-outlet"),E.Nb(),E.Nb()),2&t&&(E.dc("config",e.config),E.xb(6),E.vc(E.Zb(7,30,"SPORTJAHRESPLAN.TITEL.VERANSTALTUNG")),E.xb(3),E.dc("items",e.veranstaltungen)("loading",e.loadingVeranstaltungen)("multipleSelections",!e.multipleSelections)("placeholderTranslationKey",e.PLACEHOLDER_VAR)("optionFieldSelector","name"),E.xb(6),E.dc("config",e.config_table)("rows",e.rows)("loading",e.loadingWettkampfe),E.xb(11),E.dc("id","downloadSetzliste")("downloadUrl",e.onButtonDownload("pdf/setzliste"))("fileName","setzliste.pdf")("disabled",e.isDisabled()),E.xb(3),E.dc("id","downloadSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel"))("fileName","schusszettel.pdf")("disabled",e.isDisabled()),E.xb(3),E.dc("id","downloadBogenkontrollliste")("downloadUrl",e.onButtonDownload("pdf/bogenkontrollliste"))("fileName","bogenkontrollliste.pdf")("disabled",e.isDisabled()),E.xb(3),E.dc("id","downloadMeldezettel")("downloadUrl",e.onButtonDownload("pdf/meldezettel"))("fileName","meldezettel.pdf")("disabled",e.isDisabled()),E.xb(3),E.dc("disabled",e.isDisabled()),E.xb(13),E.dc("config",e.config_table_match)("rows",e.matchRows)("loading",e.loadingMatch))},directives:[M.a,w.a,a.f,R.a,x.a,y.a,A.a,a.h],pipes:[D.d],styles:[""]}),t})(),U=(()=>{class t extends b.DataProviderService{constructor(t){super(),this.restClient=t,this.serviceSubUrl="v1/match/schusszettel"}findMatches(t,e){return new Promise((n,i)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).path(e).build()).then(t=>{console.log("data in MatchDTO",t);const e=[P.matchToDO(t[0]),P.matchToDO(t[1])];n({result:b.RequestResult.SUCCESS,payload:e})},t=>{i(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}create(t,e){const n=P.matchToDTO(t),i=P.matchToDTO(e);return new Promise((t,e)=>{this.restClient.POST(this.getUrl(),[n,i]).then(e=>{const n=[P.matchToDO(e[0]),P.matchToDO(e[1])];t({result:b.RequestResult.SUCCESS,payload:n})},t=>{e(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(b.RestClient))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=n("NJqk");let F=(()=>{class t{constructor(t,e,n,i,s){this.specialKeys=["Backspace","Tab","End","Home","Delete","Del","ArrowLeft","ArrowRight","Left","Right","Shift"],this.ALIAS_10="+",this.el=t,this.notificationService=s,this.allowedKeys=e,this.MIN_VAL=n,this.MAX_VAL=i}notificationMethod(t){this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_EINGABEFEHLER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.DESCRIPTION",severity:L.f.INFO,origin:L.d.USER,type:L.g.OK,userAction:L.h.PENDING}),t.preventDefault()}inRange(t){return parseInt(t,10)>=this.MIN_VAL&&parseInt(t,10)<=this.MAX_VAL}onKeyDown(t){-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t))}onKeyUp(t){if(-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)||this.inRange(this.el.nativeElement.value+parseInt(t.key,10)))){const t=parseInt(this.el.nativeElement.getAttribute("tabindex"),10);document.querySelector('[tabindex="'+(t+1)+'"]').focus()}}}return t.\u0275fac=function(t){E.Ub()},t.\u0275dir=E.Eb({type:t,hostBindings:function(t,e){1&t&&E.Vb("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))}}),t})(),H=(()=>{class t extends F{constructor(t,e){super(t,["1","2","3","4","5","6","7","8","9","0"],0,10,e),this.ALIAS_10="+"}onKeyDown(t){-1===this.specialKeys.indexOf(t.key)&&(t.key!==this.ALIAS_10?this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t):this.el.nativeElement.value="10")}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(E.l),E.Jb(L.e))},t.\u0275dir=E.Eb({type:t,selectors:[["","blaPfeilNumberOnly",""]],hostBindings:function(t,e){1&t&&E.Vb("keydown",(function(t){return e.onKeyDown(t)}))},features:[E.ub]}),t})(),B=(()=>{class t extends F{constructor(t,e){super(t,["1","2","3","4","5","6","7","8","9","0"],1,99,e)}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(E.l),E.Jb(L.e))},t.\u0275dir=E.Eb({type:t,selectors:[["","blaSchuetzeNumberOnly",""]],features:[E.ub]}),t})(),K=(()=>{class t extends F{constructor(t,e){super(t,["1","2","3","4","5","6","7","8","9","0"],0,60,e)}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(E.l),E.Jb(L.e))},t.\u0275dir=E.Eb({type:t,selectors:[["","blaFehlerNumberOnly",""]],features:[E.ub]}),t})();class V{getNext(){if(this.currIdx<this.indices.length){const t=this.indices[this.currIdx];return this.currIdx+=1,t}return this.currIdx=0,this.getNext()}}const J=new class extends V{constructor(){super(),this.indices=[1,2,3,34,35,36],this.currIdx=0}},X=new class extends V{constructor(){super();const t=[[4,29],[6,31],[8,33],[37,62],[39,64],[41,66]];this.indices=[];for(const e of t)for(let t=e[0];t<=e[1];t+=6)this.indices.push(t),this.indices.push(t+1);this.currIdx=0}};class W{constructor(t){this.el=t}}let q=(()=>{class t extends W{constructor(t){super(t),this.el.nativeElement.setAttribute("tabindex",J.getNext())}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(E.l))},t.\u0275dir=E.Eb({type:t,selectors:[["","blaSchuetzenTabIndexDirective",""]],features:[E.ub]}),t})(),G=(()=>{class t extends W{constructor(t){super(t),this.el.nativeElement.setAttribute("tabindex",X.getNext())}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(E.l))},t.\u0275dir=E.Eb({type:t,selectors:[["","blaRingzahlTabIndexDirective",""]],features:[E.ub]}),t})();function Z(t,e){if(1&t&&(E.Ob(0,"td"),E.Ob(1,"label"),E.uc(2),E.Nb(),E.Kb(3,"input",8),E.Nb()),2&t){const t=e.$implicit,n=e.index;E.xb(2),E.wc("",n+1,". Satz"),E.xb(1),E.dc("value",t)}}function j(t,e){if(1&t&&(E.Ob(0,"td"),E.Kb(1,"input",8),E.Nb()),2&t){const t=e.$implicit;E.xb(1),E.dc("value",t)}}function $(t,e){if(1&t){const t=E.Pb();E.Ob(0,"td"),E.Ob(1,"input",37),E.Vb("ngModelChange",(function(e){return E.mc(t),E.Xb().$implicit.rueckennummer=e})),E.Nb(),E.Nb()}if(2&t){const t=E.Xb().$implicit;E.xb(1),E.dc("ngModel",t.rueckennummer)}}function Y(t,e){if(1&t){const t=E.Pb();E.tc(0,$,2,1,"td",34),E.Ob(1,"td",35),E.Ob(2,"input",36),E.Vb("ngModelChange",(function(n){E.mc(t);const i=e.index,s=E.Xb().index;return E.Xb().onChange(n,1,s,i,1)})),E.Nb(),E.Nb(),E.Ob(3,"td"),E.Ob(4,"input",36),E.Vb("ngModelChange",(function(n){E.mc(t);const i=e.index,s=E.Xb().index;return E.Xb().onChange(n,1,s,i,2)})),E.Nb(),E.Nb()}if(2&t){const t=e.$implicit;E.dc("ngIf",0==e.index),E.xb(2),E.dc("ngModel",t.ringzahlPfeil1),E.xb(2),E.dc("ngModel",t.ringzahlPfeil2)}}function Q(t,e){if(1&t&&(E.Ob(0,"td"),E.uc(1,"Summe"),E.Nb(),E.Ob(2,"td"),E.Kb(3,"input",38),E.Nb()),2&t){const t=e.$implicit;E.xb(3),E.dc("value",t)}}function tt(t,e){if(1&t&&(E.Ob(0,"tr"),E.Kb(1,"td"),E.tc(2,Q,4,1,"ng-template",14),E.Nb()),2&t){const t=E.Xb(2);E.xb(2),E.dc("ngForOf",t.match1.sumSatz)}}function et(t,e){if(1&t&&(E.Ob(0,"tr"),E.tc(1,Y,5,3,"ng-template",14),E.Ob(2,"td",33),E.uc(3),E.Nb(),E.Nb(),E.tc(4,tt,3,1,"tr",34)),2&t){const t=e.index,n=e.$implicit,i=E.Xb();E.xb(1),E.dc("ngForOf",n),E.xb(2),E.wc(" ",i.getSummeSchuetze(t,1)," "),E.xb(1),E.dc("ngIf",t>=i.match1.schuetzen.length-1)}}function nt(t,e){if(1&t&&(E.Ob(0,"td"),E.Ob(1,"label"),E.uc(2),E.Nb(),E.Kb(3,"input",8),E.Nb()),2&t){const t=e.$implicit,n=e.index;E.xb(2),E.wc("",n+1,". Satz"),E.xb(1),E.dc("value",t)}}function it(t,e){if(1&t&&(E.Ob(0,"td"),E.Kb(1,"input",8),E.Nb()),2&t){const t=e.$implicit;E.xb(1),E.dc("value",t)}}function st(t,e){if(1&t){const t=E.Pb();E.Ob(0,"td"),E.Ob(1,"input",37),E.Vb("ngModelChange",(function(e){return E.mc(t),E.Xb().$implicit.rueckennummer=e})),E.Nb(),E.Nb()}if(2&t){const t=E.Xb().$implicit;E.xb(1),E.dc("ngModel",t.rueckennummer)}}function at(t,e){if(1&t){const t=E.Pb();E.tc(0,st,2,1,"td",34),E.Ob(1,"td",35),E.Ob(2,"input",36),E.Vb("ngModelChange",(function(n){E.mc(t);const i=e.index,s=E.Xb().index;return E.Xb().onChange(n,2,s,i,1)})),E.Nb(),E.Nb(),E.Ob(3,"td"),E.Ob(4,"input",36),E.Vb("ngModelChange",(function(n){E.mc(t);const i=e.index,s=E.Xb().index;return E.Xb().onChange(n,2,s,i,2)})),E.Nb(),E.Nb()}if(2&t){const t=e.$implicit;E.dc("ngIf",0==e.index),E.xb(2),E.dc("ngModel",t.ringzahlPfeil1),E.xb(2),E.dc("ngModel",t.ringzahlPfeil2)}}function ct(t,e){if(1&t&&(E.Ob(0,"td"),E.uc(1,"Summe"),E.Nb(),E.Ob(2,"td"),E.Kb(3,"input",38),E.Nb()),2&t){const t=e.$implicit;E.xb(3),E.dc("value",t)}}function ht(t,e){if(1&t&&(E.Ob(0,"tr"),E.Kb(1,"td"),E.tc(2,ct,4,1,"ng-template",14),E.Nb()),2&t){const t=E.Xb(2);E.xb(2),E.dc("ngForOf",t.match2.sumSatz)}}function rt(t,e){if(1&t&&(E.Ob(0,"tr"),E.tc(1,at,5,3,"ng-template",14),E.Ob(2,"td",33),E.uc(3),E.Nb(),E.Nb(),E.tc(4,ht,3,1,"tr",34)),2&t){const t=e.index,n=e.$implicit,i=E.Xb();E.xb(1),E.dc("ngForOf",n),E.xb(2),E.wc(" ",i.getSummeSchuetze(t,2)," "),E.xb(1),E.dc("ngIf",t>=i.match2.schuetzen.length-1)}}let lt=(()=>{class t{constructor(t,e,n,i,s){this.router=t,this.schusszettelService=e,this.matchProvider=n,this.route=i,this.notificationService=s,this.match1singlesatzpoints=[],this.match2singlesatzpoints=[]}ngOnInit(){this.match1=new N(null,null,null,1,1,1,1,[],0,0,null,null),this.match1.nr=1,this.match1.schuetzen=[],this.match1singlesatzpoints=[],this.match2=new N(null,null,null,1,1,1,1,[],0,0,null,null),this.match2.nr=1,this.match2.schuetzen=[],this.match2singlesatzpoints=[],this.dirtyFlag=!1,this.initSchuetzenMatch1(),this.initSchuetzenMatch2(),this.route.params.subscribe(t=>{Object(p.c)(t.match1id)||Object(p.c)(t.match2id)||this.schusszettelService.findMatches(t.match1id,t.match2id).then(t=>{this.match1=t.payload[0],this.match2=t.payload[1],console.log("match1",this.match1),console.log("match2",this.match2);let e=!0;this.match1.schuetzen.length<=0&&(this.initSchuetzenMatch1(),e=!1),this.match2.schuetzen.length<=0&&(this.initSchuetzenMatch2(),e=!1),e&&(this.initSumSatz(),this.setPoints())},t=>{console.error(t)})})}onChange(t,e,n,i,s){const a=this["match"+e],c=a.schuetzen[n][i];let h=parseInt(t,10);h=h>=0?h:null,1===s?c.ringzahlPfeil1=h:c.ringzahlPfeil2=h,a.sumSatz[i]=this.getSumSatz(a,i),this.setPoints(),this.dirtyFlag=!0}onFehlerpunkteChange(t,e,n){const i=this["match"+e];let s=parseInt(t,10);s=s>=1?s:null,i.fehlerpunkte[n]=s,i.sumSatz[n]=this.getSumSatz(i,n),this.setPoints(),this.dirtyFlag=!0}save(){if(this.match1.satzpunkte>7||this.match2.satzpunkte>7)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.DESCRIPTION",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.ACCEPTED});else if(null==this.match1.schuetzen[0][0].rueckennummer||null==this.match1.schuetzen[1][0].rueckennummer||null==this.match1.schuetzen[2][0].rueckennummer||null==this.match2.schuetzen[0][0].rueckennummer||null==this.match2.schuetzen[1][0].rueckennummer||null==this.match2.schuetzen[2][0].rueckennummer)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.DESCRIPTION",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.ACCEPTED});else if(this.match1.schuetzen[0][0].rueckennummer===this.match1.schuetzen[1][0].rueckennummer||this.match1.schuetzen[1][0].rueckennummer===this.match1.schuetzen[2][0].rueckennummer||this.match1.schuetzen[2][0].rueckennummer===this.match1.schuetzen[0][0].rueckennummer||this.match2.schuetzen[0][0].rueckennummer===this.match2.schuetzen[1][0].rueckennummer||this.match2.schuetzen[1][0].rueckennummer===this.match2.schuetzen[2][0].rueckennummer||this.match2.schuetzen[2][0].rueckennummer===this.match2.schuetzen[0][0].rueckennummer)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.DESCRIPTION",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.ACCEPTED});else{this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SPEICHERN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.DESCRIPTION",severity:L.f.INFO,origin:L.d.USER,userAction:L.h.PENDING});for(let t=0;t<3;t++)for(let e=1;e<5;e++)this.match1.schuetzen[t][e].lfdNr<=1&&(this.match1.schuetzen[t][e].lfdNr=e+1),this.match2.schuetzen[t][e].lfdNr<=1&&(this.match2.schuetzen[t][e].lfdNr=e+1),this.match1.schuetzen[t][e].dsbMitgliedId=this.match1.schuetzen[t][0].dsbMitgliedId,this.match2.schuetzen[t][e].dsbMitgliedId=this.match2.schuetzen[t][0].dsbMitgliedId,this.match1.schuetzen[t][e].rueckennummer=this.match1.schuetzen[t][0].rueckennummer,this.match2.schuetzen[t][e].rueckennummer=this.match2.schuetzen[t][0].rueckennummer;this.schusszettelService.create(this.match1,this.match2).then(t=>{this.match1=t.payload[0],this.match2=t.payload[1],this.ngOnInit(),this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.DESCRIPTION",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.ACCEPTED})},t=>{console.error(t),this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.DESCRIPTION",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.ACCEPTED}),this.notificationService.discardNotification()}),this.dirtyFlag=!1}}next(){if(!0===this.dirtyFlag){const t={id:"schusszettel_weiter",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.DESCRIPTION",severity:L.f.QUESTION,origin:L.d.USER,type:L.g.YES_NO,userAction:L.h.PENDING};this.notificationService.observeNotification("schusszettel_weiter").subscribe(t=>{t.userAction===L.h.ACCEPTED&&(this.dirtyFlag=!1,this.matchProvider.pairToFollow(this.match2.id).then(t=>{2===t.payload.length&&this.router.navigate(["/sportjahresplan/schusszettel/"+t.payload[0]+"/"+t.payload[1]])}))}),this.notificationService.showNotification(t)}else this.matchProvider.pairToFollow(this.match2.id).then(t=>{2===t.payload.length&&this.router.navigate(["/sportjahresplan/schusszettel/"+t.payload[0]+"/"+t.payload[1]])})}trackByIndex(t,e){return t}initSchuetzenMatch1(){this.match1singlesatzpoints=[],this.match1.sumSatz=[];for(let t=0;t<5;t++)this.match1.sumSatz.push(0),this.match1singlesatzpoints.push(0);this.match1.schuetzen=[];for(let t=0;t<3;t++){this.match1.schuetzen.push(new Array);for(let e=0;e<5;e++)this.match1.schuetzen[t].push(new S(null,this.match1.id,this.match1.mannschaftId,this.match1.wettkampfId,this.match1.nr,e+1))}}initSchuetzenMatch2(){this.match2singlesatzpoints=[],this.match2.sumSatz=[];for(let t=0;t<5;t++)this.match2.sumSatz.push(0),this.match2singlesatzpoints.push(0);this.match2.schuetzen=[];for(let t=0;t<3;t++){this.match2.schuetzen.push(new Array);for(let e=0;e<5;e++)this.match2.schuetzen[t].push(new S(null,this.match2.id,this.match2.mannschaftId,this.match2.wettkampfId,this.match2.nr,e+1))}}getSumSatz(t,e){let n=0;for(const i of Object.keys(t.schuetzen))n+=t.schuetzen[i][e].ringzahlPfeil1,n+=t.schuetzen[i][e].ringzahlPfeil2;return n-=t.fehlerpunkte[e],n}setPoints(){"Liga kummulativ"===this.match1.wettkampfTyp?this.setKummulativePoints():this.setSatzPoints(),this.match1.satzpunkte>=6?(this.match1.matchpunkte=2,this.match2.matchpunkte=0):this.match2.satzpunkte>=6?(this.match1.matchpunkte=0,this.match2.matchpunkte=2):5===this.match2.satzpunkte&&5===this.match1.satzpunkte&&(this.match1.matchpunkte=1,this.match2.matchpunkte=1)}setSatzPoints(){let t=0,e=0;for(let n=0;n<5;n++)this.match1.sumSatz[n]>this.match2.sumSatz[n]?(t+=2,this.match1singlesatzpoints[n]=2,this.match2singlesatzpoints[n]=0):this.match1.sumSatz[n]<this.match2.sumSatz[n]?(e+=2,this.match1singlesatzpoints[n]=0,this.match2singlesatzpoints[n]=2):this.match1.sumSatz[n]===this.match2.sumSatz[n]&&this.match1.sumSatz[n]>0&&this.match2.sumSatz[n]>0&&(t++,e++,this.match1singlesatzpoints[n]=1,this.match2singlesatzpoints[n]=1);this.match1.satzpunkte=t,this.match2.satzpunkte=e,this.match1.matchpunkte=0,this.match2.matchpunkte=0}setKummulativePoints(){let t=0,e=0;for(let n=0;n<3;n++)t+=this.match1.sumSatz[n],e+=this.match2.sumSatz[n];t>e?(this.match1.satzpunkte=6,this.match2.satzpunkte=0):t<e&&(this.match1.satzpunkte=0,this.match2.satzpunkte=6)}initSumSatz(){for(let t=0;t<5;t++)this.match1.sumSatz[t]=this.getSumSatz(this.match1,t),this.match2.sumSatz[t]=this.getSumSatz(this.match2,t)}getSummeSchuetze(t,e){let n=0;const i=this["match"+e];for(const s of i.schuetzen[t])n+=s.ringzahlPfeil1+s.ringzahlPfeil2;return n}onButtonDownload(t){return(new b.UriBuilder).fromPath(I.a.backendBaseUrl).path("v1/download").path(t).path(this.match1.id+"/"+this.match2.id).build()}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(a.c),E.Jb(U),E.Jb(k),E.Jb(a.a),E.Jb(L.e))},t.\u0275cmp=E.Db({type:t,selectors:[["bla-schusszettel"]],decls:233,vars:40,consts:[[1,"wettkaempfe","container"],[1,"match1","print"],[1,"row"],[1,"match_col-3"],[1,"mannschaften_col-3"],[1,"small_Table","col-6"],["id","punktetabelle",1,"table","table-responsive","thead-light","table-striped",2,"max-width","100%"],[4,"ngFor","ngForOf"],["readonly","","tabindex","-1","type","text",3,"value"],[1,"col-4","offset-9"],[1,"bigTable","col-9"],["id","schusstabelle",1,"table","table-hover","table-responsive","thead-light","table-striped",2,"width","100%"],["rowspan","2"],["colspan","2"],["ngFor","",3,"ngForOf"],[1,"col-2"],[1,"row",2,"margin-bottom","10px"],[1,"col-4"],["blaFehlerNumberOnly","",1,"fehlerfeld",3,"ngModel","ngModelChange"],[1,"print","signature","s1"],[1,"m1"],[1,"m2"],[1,"print"],[1,"match2","print"],["id","henlo",1,"match_col-3"],[1,"table","table-responsive","thead-light","table-striped",2,"width","100%"],[1,"table","table-hover","table-responsive","thead-light","table-striped",2,"width","100%"],[1,"col-sm-10"],[1,"btn","btn-primary","saveButton",3,"click"],[1,"btn",3,"id","downloadUrl","fileName","disabled"],[1,"col-sm-2"],[1,"btn","btn-primary","nextButton",3,"click"],[1,"print","signature"],[1,"schuetzensumme"],[4,"ngIf"],[1,"split"],["blaPfeilNumberOnly","","blaRingzahlTabIndexDirective","","type","text",3,"ngModel","ngModelChange"],["blaSchuetzeNumberOnly","","blaSchuetzenTabIndexDirective","","type","number",3,"ngModel","ngModelChange"],["readonly","","tabindex","-1","type","number",3,"value"]],template:function(t,e){1&t&&(E.Ob(0,"div",0),E.Ob(1,"div",1),E.Ob(2,"div",2),E.Ob(3,"div",3),E.Ob(4,"h2"),E.uc(5),E.Nb(),E.Ob(6,"h2"),E.uc(7),E.Nb(),E.Nb(),E.Ob(8,"div",4),E.Ob(9,"h2"),E.uc(10),E.Nb(),E.Ob(11,"h2"),E.uc(12,"gegen"),E.Nb(),E.Ob(13,"h2"),E.uc(14),E.Nb(),E.Nb(),E.Ob(15,"div",5),E.Ob(16,"table",6),E.Ob(17,"tr"),E.tc(18,Z,4,2,"td",7),E.Ob(19,"td"),E.Ob(20,"label"),E.uc(21,"Summe"),E.Nb(),E.Kb(22,"input",8),E.Nb(),E.Ob(23,"td"),E.Ob(24,"label"),E.uc(25,"Match"),E.Nb(),E.Kb(26,"input",8),E.Nb(),E.Nb(),E.Ob(27,"tr"),E.tc(28,j,2,1,"td",7),E.Ob(29,"td"),E.Kb(30,"input",8),E.Nb(),E.Ob(31,"td"),E.Kb(32,"input",8),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Ob(33,"div",2),E.Ob(34,"div",9),E.uc(35,"Fehlerpunkte"),E.Nb(),E.Nb(),E.Ob(36,"div",2),E.Ob(37,"div",10),E.Ob(38,"table",11),E.Ob(39,"thead"),E.Ob(40,"tr"),E.Ob(41,"th",12),E.uc(42,"Schuetze"),E.Nb(),E.Ob(43,"th",13),E.uc(44,"1. Satz / Pfeile"),E.Nb(),E.Ob(45,"th",13),E.uc(46,"2. Satz / Pfeile"),E.Nb(),E.Ob(47,"th",13),E.uc(48,"3. Satz / Pfeile"),E.Nb(),E.Ob(49,"th",13),E.uc(50,"4. Satz / Pfeile"),E.Nb(),E.Ob(51,"th",13),E.uc(52,"5. Satz / Pfeile"),E.Nb(),E.Nb(),E.Ob(53,"tr"),E.Ob(54,"th"),E.uc(55,"Pfeil 1"),E.Nb(),E.Ob(56,"th"),E.uc(57,"Pfeil 2"),E.Nb(),E.Ob(58,"th"),E.uc(59,"Pfeil 1"),E.Nb(),E.Ob(60,"th"),E.uc(61,"Pfeil 2"),E.Nb(),E.Ob(62,"th"),E.uc(63,"Pfeil 1"),E.Nb(),E.Ob(64,"th"),E.uc(65,"Pfeil 2"),E.Nb(),E.Ob(66,"th"),E.uc(67,"Pfeil 1"),E.Nb(),E.Ob(68,"th"),E.uc(69,"Pfeil 2"),E.Nb(),E.Ob(70,"th"),E.uc(71,"Pfeil 1"),E.Nb(),E.Ob(72,"th"),E.uc(73,"Pfeil 2"),E.Nb(),E.Nb(),E.Nb(),E.tc(74,et,5,3,"ng-template",14),E.Nb(),E.Nb(),E.Ob(75,"div",15),E.Ob(76,"div",16),E.Ob(77,"label",17),E.uc(78,"Satz 1"),E.Nb(),E.Ob(79,"div",17),E.Ob(80,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,0)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[0]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(81,"div",16),E.Ob(82,"label",17),E.uc(83,"Satz 2"),E.Nb(),E.Ob(84,"div",17),E.Ob(85,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,1)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[1]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(86,"div",16),E.Ob(87,"label",17),E.uc(88,"Satz 3"),E.Nb(),E.Ob(89,"div",17),E.Ob(90,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,2)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[2]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(91,"div",16),E.Ob(92,"label",17),E.uc(93,"Satz 4"),E.Nb(),E.Ob(94,"div",17),E.Ob(95,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,3)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[3]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(96,"div",16),E.Ob(97,"label",17),E.uc(98,"Satz 5"),E.Nb(),E.Ob(99,"div",17),E.Ob(100,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,4)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[4]=t})),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Ob(101,"div",19),E.Ob(102,"div",20),E.Ob(103,"h1"),E.uc(104),E.Nb(),E.Ob(105,"p"),E.uc(106,"Unterschrift"),E.Nb(),E.Nb(),E.Ob(107,"div",21),E.Ob(108,"h1"),E.uc(109),E.Nb(),E.Ob(110,"p"),E.uc(111,"Unterschrift"),E.Nb(),E.Nb(),E.Nb(),E.Kb(112,"hr",22),E.Ob(113,"div",23),E.Ob(114,"div",2),E.Ob(115,"div",24),E.Ob(116,"h2"),E.uc(117),E.Nb(),E.Ob(118,"h2"),E.uc(119),E.Nb(),E.Nb(),E.Ob(120,"div",4),E.Ob(121,"h2"),E.uc(122),E.Nb(),E.Ob(123,"h2"),E.uc(124,"gegen"),E.Nb(),E.Ob(125,"h2"),E.uc(126),E.Nb(),E.Nb(),E.Ob(127,"div",5),E.Ob(128,"table",25),E.Ob(129,"tr"),E.tc(130,nt,4,2,"td",7),E.Ob(131,"td"),E.Ob(132,"label"),E.uc(133,"Summe"),E.Nb(),E.Kb(134,"input",8),E.Nb(),E.Ob(135,"td"),E.Ob(136,"label"),E.uc(137,"Match"),E.Nb(),E.Kb(138,"input",8),E.Nb(),E.Nb(),E.Ob(139,"tr"),E.tc(140,it,2,1,"td",7),E.Ob(141,"td"),E.Kb(142,"input",8),E.Nb(),E.Ob(143,"td"),E.Kb(144,"input",8),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Ob(145,"div",2),E.Ob(146,"div",9),E.uc(147,"Fehlerpunkte"),E.Nb(),E.Nb(),E.Ob(148,"div",2),E.Ob(149,"div",10),E.Ob(150,"table",26),E.Ob(151,"thead"),E.Ob(152,"tr"),E.Ob(153,"th",12),E.uc(154,"Schuetze"),E.Nb(),E.Ob(155,"th",13),E.uc(156,"1. Satz / Pfeile"),E.Nb(),E.Ob(157,"th",13),E.uc(158,"2. Satz / Pfeile"),E.Nb(),E.Ob(159,"th",13),E.uc(160,"3. Satz / Pfeile"),E.Nb(),E.Ob(161,"th",13),E.uc(162,"4. Satz / Pfeile"),E.Nb(),E.Ob(163,"th",13),E.uc(164,"5. Satz / Pfeile"),E.Nb(),E.Nb(),E.Ob(165,"tr"),E.Ob(166,"th"),E.uc(167,"Pfeil 1"),E.Nb(),E.Ob(168,"th"),E.uc(169,"Pfeil 2"),E.Nb(),E.Ob(170,"th"),E.uc(171,"Pfeil 1"),E.Nb(),E.Ob(172,"th"),E.uc(173,"Pfeil 2"),E.Nb(),E.Ob(174,"th"),E.uc(175,"Pfeil 1"),E.Nb(),E.Ob(176,"th"),E.uc(177,"Pfeil 2"),E.Nb(),E.Ob(178,"th"),E.uc(179,"Pfeil 1"),E.Nb(),E.Ob(180,"th"),E.uc(181,"Pfeil 2"),E.Nb(),E.Ob(182,"th"),E.uc(183,"Pfeil 1"),E.Nb(),E.Ob(184,"th"),E.uc(185,"Pfeil 2"),E.Nb(),E.Nb(),E.Nb(),E.tc(186,rt,5,3,"ng-template",14),E.Nb(),E.Nb(),E.Ob(187,"div",15),E.Ob(188,"div",16),E.Ob(189,"label",17),E.uc(190,"Satz 1"),E.Nb(),E.Ob(191,"div",17),E.Ob(192,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,0)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[0]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(193,"div",16),E.Ob(194,"label",17),E.uc(195,"Satz 2"),E.Nb(),E.Ob(196,"div",17),E.Ob(197,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,1)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[1]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(198,"div",16),E.Ob(199,"label",17),E.uc(200,"Satz 3"),E.Nb(),E.Ob(201,"div",17),E.Ob(202,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,2)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[2]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(203,"div",16),E.Ob(204,"label",17),E.uc(205,"Satz 4"),E.Nb(),E.Ob(206,"div",17),E.Ob(207,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,3)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[3]=t})),E.Nb(),E.Nb(),E.Nb(),E.Ob(208,"div",16),E.Ob(209,"label",17),E.uc(210,"Satz 5"),E.Nb(),E.Ob(211,"div",17),E.Ob(212,"input",18),E.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,4)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[4]=t})),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Nb(),E.Ob(213,"div",2),E.Ob(214,"div",27),E.Ob(215,"button",28),E.Vb("click",(function(){return e.save()})),E.uc(216,"Speichern "),E.Nb(),E.Ob(217,"bla-download-button",29),E.uc(218,"Drucken "),E.Nb(),E.Nb(),E.Ob(219,"div",30),E.Ob(220,"button",31),E.Vb("click",(function(){return e.next()})),E.uc(221,"Weiter "),E.Nb(),E.Nb(),E.Nb(),E.Ob(222,"div",32),E.Ob(223,"div",20),E.Ob(224,"h1"),E.uc(225),E.Nb(),E.Ob(226,"p"),E.uc(227,"Unterschrift"),E.Nb(),E.Nb(),E.Ob(228,"div",21),E.Ob(229,"h1"),E.uc(230),E.Nb(),E.Ob(231,"p"),E.uc(232,"Unterschrift"),E.Nb(),E.Nb(),E.Nb(),E.Nb()),2&t&&(E.xb(5),E.vc(e.match1.mannschaftName),E.xb(2),E.wc("",e.match1.nr,". Match"),E.xb(3),E.vc(e.match1.mannschaftName),E.xb(4),E.vc(e.match2.mannschaftName),E.xb(4),E.dc("ngForOf",e.match1singlesatzpoints),E.xb(4),E.dc("value",e.match1.satzpunkte),E.xb(4),E.dc("value",e.match1.matchpunkte),E.xb(2),E.dc("ngForOf",e.match2singlesatzpoints),E.xb(2),E.dc("value",e.match2.satzpunkte),E.xb(2),E.dc("value",e.match2.matchpunkte),E.xb(42),E.dc("ngForOf",e.match1.schuetzen),E.xb(6),E.dc("ngModel",e.match1.fehlerpunkte[0]),E.xb(5),E.dc("ngModel",e.match1.fehlerpunkte[1]),E.xb(5),E.dc("ngModel",e.match1.fehlerpunkte[2]),E.xb(5),E.dc("ngModel",e.match1.fehlerpunkte[3]),E.xb(5),E.dc("ngModel",e.match1.fehlerpunkte[4]),E.xb(4),E.vc(e.match2.mannschaftName),E.xb(5),E.vc(e.match1.mannschaftName),E.xb(8),E.vc(e.match2.mannschaftName),E.xb(2),E.wc("",e.match2.nr,". Match"),E.xb(3),E.vc(e.match1.mannschaftName),E.xb(4),E.vc(e.match2.mannschaftName),E.xb(4),E.dc("ngForOf",e.match1singlesatzpoints),E.xb(4),E.dc("value",e.match1.satzpunkte),E.xb(4),E.dc("value",e.match1.matchpunkte),E.xb(2),E.dc("ngForOf",e.match2singlesatzpoints),E.xb(2),E.dc("value",e.match2.satzpunkte),E.xb(2),E.dc("value",e.match2.matchpunkte),E.xb(42),E.dc("ngForOf",e.match2.schuetzen),E.xb(6),E.dc("ngModel",e.match2.fehlerpunkte[0]),E.xb(5),E.dc("ngModel",e.match2.fehlerpunkte[1]),E.xb(5),E.dc("ngModel",e.match2.fehlerpunkte[2]),E.xb(5),E.dc("ngModel",e.match2.fehlerpunkte[3]),E.xb(5),E.dc("ngModel",e.match2.fehlerpunkte[4]),E.xb(5),E.dc("id","downloadMatchSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel_matches"))("fileName","match_schusszettel.pdf")("disabled",!1),E.xb(8),E.vc(e.match2.mannschaftName),E.xb(5),E.vc(e.match1.mannschaftName))},directives:[i.s,s.c,K,s.n,s.q,y.a,i.t,H,G,s.t,B,q],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center;margin:10px;font-size:10px;padding:5px}td[_ngcontent-%COMP%]{font-size:16px}label[_ngcontent-%COMP%]{font-size:10px}.split[_ngcontent-%COMP%]{border-left:3px solid #4a4a4a}.match1[_ngcontent-%COMP%]{margin-top:20px}.match2[_ngcontent-%COMP%]{margin-top:-150px;margin-bottom:20px}.match1[_ngcontent-%COMP%], .match2[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.1)}.schuetzensumme[_ngcontent-%COMP%]{font-size:30px}.btn[_ngcontent-%COMP%]{margin:0 15px 20px 20px}.signature[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{visibility:hidden}.match[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2vw}.mannschaften_col-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .match[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.mannschaften_col-3[_ngcontent-%COMP%]{max-width:16em;min-width:8em;margin-left:1em}.henlo.match_col-3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.match_col-3[_ngcontent-%COMP%]{max-width:17em;min-width:8em;margin-left:1.5em}@media print{input[_ngcontent-%COMP%]{border:2px solid #dee2e6;height:45px;width:45px;font-size:25px}h1[_ngcontent-%COMP%]{font-size:10px!important}h3[_ngcontent-%COMP%]{font-size:2vm}.match1[_ngcontent-%COMP%]{margin-bottom:1cm}.match2[_ngcontent-%COMP%]{margin-top:1cm}.m1[_ngcontent-%COMP%], .m2[_ngcontent-%COMP%]{float:left}.m2[_ngcontent-%COMP%]{margin-left:20%}.signature[_ngcontent-%COMP%]{visibility:visible;margin-top:-2cm;margin-bottom:1cm;border-bottom:1px solid #000;display:inline-block;width:90%}.signature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1cm;margin-bottom:.5cm}.s1[_ngcontent-%COMP%]{margin-top:.5cm;margin-bottom:-2cm}hr[_ngcontent-%COMP%]{visibility:visible;width:100%;height:5px;border-style:dotted;size:1px;background:#dee2e6;margin-top:2.5cm;margin-bottom:.5cm}}.fehlerfeld[_ngcontent-%COMP%]{margin-left:-26px}"]}),t})(),ot=(()=>{class t extends b.DataProviderService{constructor(t){super(),this.restClient=t,this.serviceSubUrl="v1/passen"}get(t){return new Promise((e,n)=>{this.restClient.GET((new b.UriBuilder).fromPath(this.getUrl()).path(t).build()).then(t=>{const n=z.passeToDO(t);e({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}create(t){const e=z.passeToDTO(t);return new Promise((t,n)=>{this.restClient.POST(this.getUrl(),e).then(e=>{const n=z.passeToDO(e);t({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}update(t){const e=z.passeToDTO(t);return new Promise((t,n)=>{this.restClient.PUT(this.getUrl(),e).then(e=>{const n=z.passeToDO(e);t({result:b.RequestResult.SUCCESS,payload:n})},t=>{n(0===t.status?{result:b.RequestResult.CONNECTION_PROBLEM}:{result:b.RequestResult.FAILURE})})})}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(b.RestClient))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ut=n("VXT6"),bt=n("yVnM"),dt=n("6NWb");function mt(t,e){if(1&t){const t=E.Pb();E.Ob(0,"button",11),E.Vb("click",(function(){E.mc(t);const e=E.Xb().$implicit;return E.Xb().updateSessionWithoutTokenGeneration(e.scheibenNr)})),E.Kb(1,"fa-icon",12),E.Nb()}2&t&&(E.xb(1),E.dc("icon","trash"))}function ft(t,e){if(1&t){const t=E.Pb();E.Ob(0,"button",13),E.Vb("click",(function(){E.mc(t);const e=E.Xb().$implicit;return E.Xb().updateSession(e.scheibenNr)})),E.Kb(1,"fa-icon",12),E.Nb()}2&t&&(E.xb(1),E.dc("icon","plus-circle"))}function pt(t,e){if(1&t&&(E.Ob(0,"label"),E.uc(1),E.Nb()),2&t){const t=E.Xb().$implicit;E.xb(1),E.vc(t.accessToken)}}function gt(t,e){if(1&t&&(E.Ob(0,"tr"),E.Ob(1,"td"),E.Ob(2,"span",6),E.uc(3),E.Nb(),E.Nb(),E.Ob(4,"td"),E.Ob(5,"span",7),E.uc(6),E.Nb(),E.Nb(),E.Ob(7,"td"),E.tc(8,mt,2,1,"button",8),E.tc(9,ft,2,1,"button",9),E.Nb(),E.Ob(10,"td"),E.tc(11,pt,2,1,"label",10),E.Nb(),E.Nb()),2&t){const t=e.$implicit;E.xb(3),E.vc(t.scheibenNr),E.xb(2),E.Bb("badge-danger",!t.isActive)("badge-success",t.isActive),E.xb(1),E.wc(" ",t.isActive?"Aktiv":"Nicht aktiv"," "),E.xb(2),E.dc("ngIf",t.isActive),E.xb(1),E.dc("ngIf",!t.isActive),E.xb(2),E.dc("ngIf",t.isActive)}}const Nt=["[]","null","undefined"];let Ot=(()=>{class t{constructor(t,e,n){this.route=t,this.router=e,this.tabletSessionService=n,this.currentDeviceIsActive=!1,this.accessToken=""}ngOnInit(){this.route.params.subscribe(t=>{if(!Object(p.c)(t.wettkampfId)){const e=t.wettkampfId;this.tabletSessionService.findAllTabletSessions(e).then(t=>{this.sessions=t.payload,this.setActiveSession(),this.setTabletEingabeRoute(),this.accessToken=this.currentSession.accessToken.toString()},t=>{console.error(t),this.sessions=[];for(let n=0;n<8;n++)this.sessions.push(new ut.a(n+1,parseInt(e,10),!1));this.setActiveSession()})}})}updateSession(t){const e=this.sessions[t-1];e.isActive=!e.isActive,this.storeCurrentSession(e),this.tabletSessionService.update(e).then(e=>{this.sessions[t-1]=this.currentSession=e.payload,this.storeCurrentSession(this.currentSession),this.accessToken=this.currentSession.accessToken.toString(),this.setTabletEingabeRoute(),this.currentDeviceIsActive&&this.currentSession&&this.currentSession.otherMatchId&&this.router.navigate([this.tabletEingabeRoute])},t=>{console.log(t)})}updateSessionWithoutTokenGeneration(t){const e=this.sessions[t-1];e.isActive=!e.isActive,this.storeCurrentSession(e),this.tabletSessionService.updateWithoutTokenCreation(e).then(e=>{this.sessions[t-1]=this.currentSession=e.payload,this.storeCurrentSession(this.currentSession),this.accessToken="",this.setTabletEingabeRoute(),this.currentDeviceIsActive&&this.currentSession&&this.currentSession.otherMatchId&&this.router.navigate([this.tabletEingabeRoute])},t=>{console.log(t)})}setActiveSession(){const t=localStorage.getItem("tabletSession");this.currentDeviceIsActive=Boolean(t)&&Nt.indexOf(t)<0,this.currentDeviceIsActive&&(this.currentSession=JSON.parse(t),this.sessions[this.currentSession.scheibenNr-1]=this.currentSession)}storeCurrentSession(t){t.isActive?(localStorage.setItem("tabletSession",JSON.stringify(t)),this.currentDeviceIsActive=!0):(localStorage.removeItem("tabletSession"),this.currentDeviceIsActive=!1)}setTabletEingabeRoute(){this.currentSession&&(this.tabletEingabeRoute="/"+this.currentSession.matchID+"/"+this.currentSession.otherMatchId+"/tablet")}canNavigateToEingabe(t){return this.currentDeviceIsActive&&this.currentSession&&this.currentSession.otherMatchId&&this.currentSession.scheibenNr===t.scheibenNr}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(a.a),E.Jb(a.c),E.Jb(bt.a))},t.\u0275cmp=E.Db({type:t,selectors:[["bla-tablet-admin"]],decls:15,vars:1,consts:[[1,"container"],[1,"mb-4","mt-3"],[1,"table-responsive"],[1,"table"],[2,"width","25%"],[4,"ngFor","ngForOf"],[1,"h4","text-secondary","text-center","m-0","p-0"],[1,"badge"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[3,"icon"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(E.Ob(0,"div",0),E.Ob(1,"h2",1),E.uc(2,"Tabletverwaltung"),E.Nb(),E.Ob(3,"div",2),E.Ob(4,"table",3),E.Ob(5,"tr"),E.Ob(6,"th",4),E.uc(7,"Scheibe"),E.Nb(),E.Ob(8,"th",4),E.uc(9,"Status"),E.Nb(),E.Ob(10,"th",4),E.uc(11,"Aktionen"),E.Nb(),E.Ob(12,"th",4),E.uc(13,"Access Token"),E.Nb(),E.Nb(),E.tc(14,gt,12,9,"tr",5),E.Nb(),E.Nb(),E.Nb()),2&t&&(E.xb(14),E.dc("ngForOf",e.sessions))},directives:[i.s,i.t,dt.b],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center}"]}),t})();function St(t,e){if(1&t){const t=E.Pb();E.Ob(0,"div",14),E.Ob(1,"label",15),E.uc(2),E.Nb(),E.Ob(3,"input",16),E.Vb("ngModelChange",(function(n){E.mc(t);const i=e.index;return E.Xb(3).schuetzen[i].schuetzeNr=n})),E.Nb(),E.Nb()}if(2&t){const t=e.index,n=E.Xb(3);E.xb(1),E.dc("for","schuetze"+t+"1Nummer"),E.xb(1),E.wc("",t+1,". Sch\xfctze"),E.xb(1),E.dc("ngModel",n.schuetzen[t].schuetzeNr)("id","schuetze"+t+"1Nummer")("tabindex",t+1)}}function zt(t,e){if(1&t){const t=E.Pb();E.Ob(0,"div",3),E.Ob(1,"h2",8),E.uc(2,"Bitte geben Sie die Sch\xfctzen-Nummern f\xfcr dieses Match ein:"),E.Nb(),E.Nb(),E.Ob(3,"div",9),E.Ob(4,"div",10),E.tc(5,St,4,5,"ng-template",11),E.Nb(),E.Nb(),E.Ob(6,"div",12),E.Ob(7,"button",13),E.Vb("click",(function(){return E.mc(t),E.Xb(2).submitSchuetzenNr()})),E.uc(8," Speichern "),E.Nb(),E.Nb()}if(2&t){const t=E.Xb(2);E.xb(5),E.dc("ngForOf",t.schuetzen),E.xb(2),E.dc("disabled",!t.hasValidSchuetzenNr())}}function Tt(t,e){if(1&t){const t=E.Pb();E.Ob(0,"input",26),E.Vb("ngModelChange",(function(e){E.mc(t);const n=E.Xb().$implicit;return E.Xb(3).onChange(e,1,n)}))("ngModelChange",(function(e){E.mc(t);const n=E.Xb().$implicit,i=E.Xb(3);return n.passen[i.tabletSession.satzNr-1].ringzahlPfeil1=e})),E.Nb(),E.Ob(1,"input",26),E.Vb("ngModelChange",(function(e){E.mc(t);const n=E.Xb().$implicit;return E.Xb(3).onChange(e,2,n)}))("ngModelChange",(function(e){E.mc(t);const n=E.Xb().$implicit,i=E.Xb(3);return n.passen[i.tabletSession.satzNr-1].ringzahlPfeil2=e})),E.Nb()}if(2&t){const t=E.Xb().$implicit,e=E.Xb(3);E.dc("ngModel",t.passen[e.tabletSession.satzNr-1].ringzahlPfeil1),E.xb(1),E.dc("ngModel",t.passen[e.tabletSession.satzNr-1].ringzahlPfeil2)}}const Pt=function(t,e){return{"offset-lg-2 offset-xl-3":t,"mb-4":e}};function Et(t,e){if(1&t&&(E.Ob(0,"div",23),E.Ob(1,"div",24),E.Ob(2,"h4"),E.uc(3),E.Nb(),E.Ob(4,"div",25),E.tc(5,Tt,2,2,"ng-template",2),E.Nb(),E.Nb(),E.Nb()),2&t){const t=e.index,n=e.$implicit,i=E.Xb(3);E.dc("ngClass",E.ic(3,Pt,0===t,2===t)),E.xb(3),E.wc("Sch\xfctze ",n.schuetzeNr,""),E.xb(2),E.dc("ngIf",n.passen.length>=i.tabletSession.satzNr)}}function kt(t,e){if(1&t){const t=E.Pb();E.Ob(0,"div",17),E.Ob(1,"h2"),E.uc(2),E.Nb(),E.Ob(3,"span",7),E.uc(4,"\u2022"),E.Nb(),E.Ob(5,"h2",18),E.uc(6),E.Nb(),E.Nb(),E.tc(7,Et,6,6,"ng-template",11),E.Ob(8,"div",19),E.Ob(9,"button",20),E.Vb("click",(function(){return E.mc(t),E.Xb(2).nextMatch()})),E.uc(10," N\xe4chstes Match "),E.Kb(11,"i",21),E.Nb(),E.Ob(12,"button",22),E.Vb("click",(function(){return E.mc(t),E.Xb(2).nextSatz()})),E.uc(13," N\xe4chster Satz "),E.Kb(14,"i",21),E.Nb(),E.Nb()}if(2&t){const t=E.Xb(2);E.xb(2),E.vc(t.currentMatch.mannschaftName),E.xb(4),E.wc("Satz ",t.tabletSession.satzNr,""),E.xb(1),E.dc("ngForOf",t.schuetzen),E.xb(5),E.dc("disabled",!t.allPasseFilled())}}function vt(t,e){if(1&t&&(E.Ob(0,"div",3),E.Ob(1,"h1",4),E.uc(2),E.Nb(),E.Nb(),E.Ob(3,"div",5),E.Ob(4,"h3",6),E.uc(5),E.Nb(),E.Ob(6,"span",7),E.uc(7,"\u2022"),E.Nb(),E.Ob(8,"h3",6),E.uc(9),E.Nb(),E.Ob(10,"span",7),E.uc(11,"\u2022"),E.Nb(),E.Ob(12,"h3",6),E.uc(13),E.Nb(),E.Nb(),E.Ob(14,"div",3),E.Kb(15,"hr"),E.Nb(),E.tc(16,zt,9,2,"ng-template",2),E.tc(17,kt,15,4,"ng-template",2)),2&t){const t=E.Xb();E.xb(2),E.wc("Scheibe ",t.tabletSession.scheibenNr,""),E.xb(3),E.wc("Wettkampftag ",t.match1.wettkampfTag,""),E.xb(4),E.wc("Match ",t.match1.nr,""),E.xb(4),E.xc("",t.match1.mannschaftName," vs. ",t.match2.mannschaftName,""),E.xb(3),E.dc("ngIf",!t.hasSchuetzenNummern()),E.xb(1),E.dc("ngIf",t.hasSchuetzenNummern())}}function Ct(t,e){if(1&t&&(E.Ob(0,"div",27),E.Ob(1,"div",28),E.uc(2," Bitte Konfigurieren Sie zun\xe4chst Ihr Ger\xe4t mit Hilfe der "),E.Ob(3,"a",29),E.uc(4,"Tablet-Administration in der Ligatabelle-Verwaltung"),E.Nb(),E.uc(5,". "),E.Nb(),E.Nb()),2&t){const t=E.Xb();E.xb(3),E.ec("routerLink",t.tabletAdminRoute)}}class It{constructor(t){this.passen=[],this.addPasse(),this.schuetzeNr=Number.isNaN(t)?null:t}addPasse(){const t=new S;t.lfdNr=this.passen.length+1,t.rueckennummer=this.schuetzeNr,this.passen.push(t)}}const Mt=new N(null,null,null,1,1,1,1,[],1,1,null,null);let wt=(()=>{class t{constructor(t,e,n,i,s,a,c){this.schusszettelService=t,this.passeService=e,this.matchService=n,this.tabletSessionService=i,this.route=s,this.router=a,this.notificationService=c}static getSchuetzeIdxValues(){return Array.apply(null,{length:3}).map(Number.call,Number)}ngOnInit(){this.match1=Mt,this.match2=Mt,this.currentMatch=Mt,this.route.params.subscribe(t=>{Object(p.c)(t.match1id)||Object(p.c)(t.match2id)||this.schusszettelService.findMatches(t.match1id,t.match2id).then(t=>{this.match1=t.payload[0],this.match2=t.payload[1],this.tabletAdminRoute="/schusszettel/tabletadmin/"+this.match1.wettkampfId,this.initStorageData(),this.tabletSession&&(this.currentMatch=this.match2.scheibenNummer===this.tabletSession.scheibenNr?this.match2:this.match1,this.initExistingPassen()),this.tabletSession.matchID=this.currentMatch&&this.currentMatch.id?this.currentMatch.id:this.tabletSession.matchID,this.updateTabletSession(),this.dumpStorageData()},t=>{console.error(t)})})}initStorageData(){const t=Number.parseInt(localStorage.getItem("submittedSchuetzenNr"),10);try{this.tabletSession=JSON.parse(localStorage.getItem("tabletSession")),this.tabletSession.satzNr||(this.tabletSession.satzNr=1,this.updateTabletSession())}catch(e){this.notificationService.observeNotification("tabletSessionMissing").subscribe(t=>{t.userAction===L.h.ACCEPTED&&this.router.navigate([this.tabletAdminRoute])}),this.resetStorageData(),this.showMissingTabletSessionNotification()}this.submittedSchuetzenNr=!(!Boolean(t)||isNaN(t))&&1===t,this.initSchuetzen()}initSchuetzen(){const e=localStorage.getItem("schuetzen"),n=Boolean(e)?JSON.parse(e):[];if(this.schuetzen=[],0===n.length)for(const i of t.getSchuetzeIdxValues()){const t=Number.parseInt(localStorage.getItem("schuetze"+(i+1)),10);this.schuetzen.push(new It(t))}else for(const t of n){const e=new It(Number(t.schuetzeNr));e.passen=[];for(const n of t.passen){const t=new S;for(const e of Object.keys(n))t[e]=n[e];e.passen.push(t)}this.schuetzen.push(e)}}dumpStorageData(){if(localStorage.setItem("tabletSession",JSON.stringify(this.tabletSession)),localStorage.setItem("submittedSchuetzenNr",this.submittedSchuetzenNr?Number(1).toString():Number(0).toString()),localStorage.setItem("schuetzen",Boolean(this.schuetzen)?JSON.stringify(this.schuetzen):""),this.hasSchuetzenNummern())for(const e of t.getSchuetzeIdxValues())localStorage.setItem("schuetze"+(e+1),this.schuetzen[e].schuetzeNr.toString())}resetStorageData(){localStorage.setItem("submittedSchuetzenNr","0"),localStorage.setItem("schuetzen","");for(const e of t.getSchuetzeIdxValues())localStorage.setItem("schuetze"+(e+1),"");this.schuetzen=[],this.submittedSchuetzenNr=!1}initExistingPassen(){let t=0;for(const e of this.currentMatch.schuetzen){if(e.length>0)for(this.schuetzen[t].passen=e;this.schuetzen[t].passen.length<this.tabletSession.satzNr;)this.schuetzen[t].addPasse();t++}this.dumpStorageData()}submitSchuetzenNr(){this.hasValidSchuetzenNr()&&(this.submittedSchuetzenNr=!0,this.dumpStorageData())}hasValidSchuetzenNr(){return Boolean(this.schuetzen)&&null!==this.schuetzen[0].schuetzeNr&&null!==this.schuetzen[1].schuetzeNr&&null!==this.schuetzen[2].schuetzeNr&&this.schuetzen[0].schuetzeNr>0&&this.schuetzen[1].schuetzeNr>0&&this.schuetzen[2].schuetzeNr>0}hasSchuetzenNummern(){return this.hasValidSchuetzenNr()&&this.submittedSchuetzenNr}onChange(t,e,n){const i=n.passen[this.tabletSession.satzNr-1];i["ringzahlPfeil"+e]=t,this.passeIsValid(i)&&(this.enrichPasseDO(i,n),this.createOrUpdatePasse(i,n))}createOrUpdatePasse(t,e){null!==t.id?this.passeService.update(t).then(t=>{e.passen[this.tabletSession.satzNr-1]=t.payload,this.dumpStorageData()}).catch(t=>{console.error(t)}):this.passeService.create(t).then(t=>{e.passen[this.tabletSession.satzNr-1]=t.payload,this.dumpStorageData()}).catch(t=>{console.error(t)})}nextSatz(){this.allPasseFilled()&&(this.addEmptyPassen(),this.tabletSession.satzNr++,this.updateTabletSession(),this.dumpStorageData())}addEmptyPassen(){for(const t of this.schuetzen)t.addPasse()}allPasseFilled(){let t=!0;for(const e of this.schuetzen)t=t&&this.passeIsValid(e.passen[this.tabletSession.satzNr-1]);return t}nextMatch(){this.showConfirmNextMatchNotification(),this.notificationService.observeNotification("tabletEingabeConfirmNextMatch").subscribe(t=>{t.userAction===L.h.ACCEPTED&&(this.showNextMatchNotification(),this.matchService.next(this.currentMatch.id).then(t=>{2===t.payload.length&&(this.resetStorageData(),this.initStorageData(),this.router.navigate(["/schusszettel/"+t.payload[0]+"/"+t.payload[1]+"/tablet"]),this.notificationService.discardNotification())}))})}updateTabletSession(){this.tabletSession&&this.tabletSessionService.update(this.tabletSession).then(t=>{this.tabletSession=t.payload,this.dumpStorageData()})}showMissingTabletSessionNotification(){this.notificationService.showNotification({id:"tabletSessionMissing",title:"Konfigurationsfehler",description:"Dieses Ger\xe4t wurde noch f\xfcr keine Scheibe registriert. Bitte holen Sie dies in der Ligatabelle-Administration nach.",severity:L.f.ERROR,origin:L.d.SYSTEM,type:L.g.OK,userAction:L.h.PENDING})}showConfirmNextMatchNotification(){this.notificationService.showNotification({id:"tabletEingabeConfirmNextMatch",title:"N\xe4chstes Match starten",description:"Wollen Sie wirklich das n\xe4chste Match starten?",severity:L.f.QUESTION,origin:L.d.SYSTEM,type:L.g.YES_NO,userAction:L.h.PENDING})}showNextMatchNotification(){this.notificationService.showNotification({id:"tabletEingabeNextMatch",title:"L\xe4dt ...",description:"Das n\xe4chste anstehende Match auf dieser Scheibe wird geladen...",severity:L.f.INFO,origin:L.d.USER,type:L.g.OK,userAction:L.h.PENDING})}passeIsValid(t){return!!t&&t.ringzahlPfeil1&&t.ringzahlPfeil1>=0&&t.ringzahlPfeil2&&t.ringzahlPfeil2>=0}enrichPasseDO(t,e){t.mannschaftId=this.currentMatch.mannschaftId,t.matchNr=this.currentMatch.nr,t.matchId=this.currentMatch.id,t.wettkampfId=this.currentMatch.wettkampfId,t.rueckennummer=e.schuetzeNr}}return t.\u0275fac=function(e){return new(e||t)(E.Jb(U),E.Jb(ot),E.Jb(k),E.Jb(bt.a),E.Jb(a.a),E.Jb(a.c),E.Jb(L.e))},t.\u0275cmp=E.Db({type:t,selectors:[["bla-tableteingabe"]],decls:4,vars:2,consts:[[1,"tablet-eingabe"],[1,"row"],[3,"ngIf"],[1,"col-sm-12"],[1,"w-100","text-center","my-3"],[1,"col-sm-12","tablet-eingabe-info-section"],[1,"text-center","d-inline-block"],[1,"mx-3","separator"],[1,"w-100","text-center","d-inline-block"],[1,"offset-lg-3","col-lg-6","offset-xl-4","col-xl-4"],[1,"pb-5","pt-3","w-100","flex-container","justify-content-around"],["ngFor","",3,"ngForOf"],[1,"offset-4","col-sm-4","justify-content-end","flex-container"],[1,"btn","btn-primary","mb-5",3,"disabled","click"],[1,"d-inline-flex","align-items-center","flex-column"],[1,"h4",3,"for"],["blaMyNumberOnly","","type","number",3,"ngModel","id","tabindex","ngModelChange"],[1,"col-sm-12","tablet-eingabe-current"],[1,"mb-3"],[1,"offset-2","col-sm-8","justify-content-between","flex-container"],[1,"btn","btn-primary","mr-3","my-5",3,"click"],[1,"fa","fa-fw","fa-chevron-right"],[1,"btn","btn-primary","mr-3","my-5",3,"disabled","click"],[1,"col-lg-3","col-xl-2",3,"ngClass"],[1,"schuetze"],[1,"flex-container"],["blaMyNumberOnly","","type","text",1,"m-2",3,"ngModel","ngModelChange"],[1,"col-sm-12","justify-content-around"],[1,"alert","alert-warning","m-3"],[3,"routerLink"]],template:function(t,e){1&t&&(E.Ob(0,"div",0),E.Ob(1,"div",1),E.tc(2,vt,18,7,"ng-template",2),E.tc(3,Ct,6,1,"ng-template",2),E.Nb(),E.Nb()),2&t&&(E.xb(2),E.dc("ngIf",e.tabletSession),E.xb(1),E.dc("ngIf",!e.tabletSession))},directives:[i.t,i.s,s.t,s.c,s.n,s.q,i.q,a.f],styles:[".tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:1.75rem}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:2rem}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}.flex-container[_ngcontent-%COMP%]{display:flex}"]}),t})();var Rt=n("th7h");let xt=(()=>{class t{constructor(t){this.currentUserService=t}canActivate(){return this.currentUserService.hasAnyPermisson([Rt.b.CAN_READ_WETTKAMPF,Rt.b.CAN_MODIFY_WETTKAMPF])}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(Rt.a))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac}),t})();const yt=[{path:"",pathMatch:"full",component:_,canActivate:[xt]},{path:"",pathMatch:"full",component:lt},{path:"",pathMatch:"full",component:wt},{path:"",pathMatch:"full",component:Ot},{path:"tabletadmin/:wettkampfId",pathMatch:"full",component:Ot},{path:"schusszettel/:match1id/:match2id",pathMatch:"full",component:lt},{path:":match1id/:match2id/tablet",pathMatch:"full",component:wt}];let At=(()=>{class t{constructor(t){this.currentUserService=t}canActivate(t,e){return this.currentUserService.hasAnyPermisson([L.i.CAN_READ_MY_VERANSTALTUNG])}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(L.a))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac}),t})(),Dt=(()=>{class t{constructor(t){this.currentUserService=t}canActivate(t,e){return this.currentUserService.hasAnyPermisson([L.i.CAN_OPERATE_SPOTTING])}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(L.a))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac}),t})(),_t=(()=>{class t{constructor(t){this.currentUserService=t}canActivate(t,e){return this.currentUserService.hasAnyPermisson([L.i.CAN_MODIFY_MY_VERANSTALTUNG,L.i.CAN_OPERATE_SPOTTING])}}return t.\u0275fac=function(e){return new(e||t)(E.Sb(L.a))},t.\u0275prov=E.Fb({token:t,factory:t.\u0275fac}),t})(),Ut=(()=>{class t{static forRoot(){return{ngModule:c.a,providers:[xt,At,Dt,_t]}}}return t.\u0275mod=E.Hb({type:t}),t.\u0275inj=E.Gb({factory:function(e){return new(e||t)},providers:[xt,At,Dt,_t],imports:[[i.c,a.g.forChild(yt),c.a.forChild(),s.k]]}),t})()}}]);