(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{gmyM:function(t,e,a){"use strict";a.r(e),a.d(e,"WettkampfModule",(function(){return P}));var n=a("ofXK"),s=a("3Pt+"),i=a("tyNb"),r=a("FpXt");const h={moduleTranslationKey:"MANNSCHAFT",pageTitleTranslationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TITLE",navigationCardsConfig:{navigationCards:[]}};var c=a("PEb7");const o={columns:[{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.MATCH",propertyName:"matchNr",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.MANNSCHAFT",propertyName:"mannschaftName",width:20},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ1",propertyName:"mannschaftSatz1",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ2",propertyName:"mannschaftSatz2",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ3",propertyName:"mannschaftSatz3",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ4",propertyName:"mannschaftSatz4",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ5",propertyName:"mannschaftSatz5",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.OPPONENT",propertyName:"opponentName",width:20},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ1",propertyName:"opponentSatz1",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ2",propertyName:"opponentSatz2",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ3",propertyName:"opponentSatz3",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ4",propertyName:"opponentSatz4",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZ5",propertyName:"opponentSatz5",width:5},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.SATZPUNKTE",propertyName:"satzpunkte",width:20},{translationKey:"MANNSCHAFTEN.MANNSCHAFTEN.TABLE.COLUMNS.MATCHPUNKTE",propertyName:"matchpunkte",width:20}]};class l{constructor(t,e,a,n,s,i,r,h,c,o,l,d,u,N,b,m){this.matchNr=t,this.wettkampfId=e,this.mannschaftName=a,this.mannschaftSatz1=n,this.mannschaftSatz2=s,this.mannschaftSatz3=i,this.mannschaftSatz4=r,this.mannschaftSatz5=h,this.opponentName=c,this.opponentSatz1=o,this.opponentSatz2=l,this.opponentSatz3=d,this.opponentSatz4=u,this.opponentSatz5=N,this.satzpunkte=b,this.matchpunkte=m}}var d=a("fXoL");let u=(()=>{class t{constructor(){this.wettkampErgebnisse=[],this.mannschaften=[],this.matches=[],this.passen=[]}getMannschaftsname(t){for(const e of this.mannschaften)if(e.id===t)return e.name}getSatzergebnis(t,e,a){let n=0;const s=this.passen.filter(n=>n.matchNr===t&&n.lfdNr===e&&a===n.mannschaftId);for(const i of s)for(const t of i.ringzahl)n+=t;return n}getSatzpunkte(t){let e="-",a="-";return null!=this.matches[t].satzpunkte&&(e=String(this.matches[t].satzpunkte)),null!=this.matches[t+1].satzpunkte&&(a=String(this.matches[t+1].satzpunkte)),e+" : "+a}getMatchpunkte(t){let e="-",a="-";return null!=this.matches[t].matchpunkte&&(e=String(this.matches[t].matchpunkte)),null!=this.matches[t+1].matchpunkte&&(a=String(this.matches[t+1].matchpunkte)),e+" : "+a}createErgebnisse(t,e,a,n,s,i){return this.matches=s,this.passen=i,this.currentMannschaft=e,this.veranstaltung=n,this.mannschaften=a,this.sportjahr=t,void 0!==this.currentMannschaft&&(this.matches=this.filterMannschaft()),this.createWettkampfergebnisse()}filterMannschaft(){const t=[];for(let e=0;e<this.matches.length;e+=2)this.currentMannschaft.id!==this.matches[e].mannschaftId&&this.currentMannschaft.id!==this.matches[e+1].mannschaftId||(t.push(this.matches[e]),t.push(this.matches[e+1]));return t}createWettkampfergebnisse(){this.wettkampErgebnisse=[];for(let t=0;t<this.matches.length;t+=2){const e=new l(this.matches[t].nr,this.matches[t].wettkampfId,this.getMannschaftsname(this.matches[t].mannschaftId),this.getSatzergebnis(this.matches[t].nr,1,this.matches[t].mannschaftId),this.getSatzergebnis(this.matches[t].nr,2,this.matches[t].mannschaftId),this.getSatzergebnis(this.matches[t].nr,3,this.matches[t].mannschaftId),this.getSatzergebnis(this.matches[t].nr,4,this.matches[t].mannschaftId),this.getSatzergebnis(this.matches[t].nr,5,this.matches[t].mannschaftId),this.getMannschaftsname(this.matches[t+1].mannschaftId),this.getSatzergebnis(this.matches[t+1].nr,1,this.matches[t+1].mannschaftId),this.getSatzergebnis(this.matches[t+1].nr,2,this.matches[t+1].mannschaftId),this.getSatzergebnis(this.matches[t+1].nr,3,this.matches[t+1].mannschaftId),this.getSatzergebnis(this.matches[t+1].nr,4,this.matches[t+1].mannschaftId),this.getSatzergebnis(this.matches[t+1].nr,5,this.matches[t+1].mannschaftId),this.getSatzpunkte(t),this.getMatchpunkte(t));this.wettkampErgebnisse.push(e)}return this.matches=[],this.passen=[],this.wettkampErgebnisse}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var N=a("X628"),b=a("ny2l"),m=a("qvop"),f=a("YfBl"),p=a("th7h"),g=a("TNm4");let S=(()=>{class t extends f.DataProviderService{constructor(t,e){super(),this.restClient=t,this.currentUserService=e,this.serviceSubUrl="v1/match"}findByWettkampfId(t){return new Promise((e,a)=>{this.restClient.GET((new f.UriBuilder).fromPath(this.getUrl()).path("findByWettkampfId/wettkampfid="+t).build()).then(t=>{e({result:f.RequestResult.SUCCESS,payload:Object(g.a)(t)})},t=>{a(0===t.status?{result:f.RequestResult.CONNECTION_PROBLEM}:{result:f.RequestResult.FAILURE})})})}findAll(){return new Promise((t,e)=>{this.restClient.GET(this.getUrl()+"/").then(e=>{t({result:f.RequestResult.SUCCESS,payload:Object(g.a)(e)})},t=>{e(0===t.status?{result:f.RequestResult.CONNECTION_PROBLEM}:{result:f.RequestResult.FAILURE})})})}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(f.RestClient),d.Sb(p.a))},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=a("sQ0O"),M=a("5egv"),E=a("NJqk");let T=(()=>{class t extends f.DataProviderService{constructor(t,e){super(),this.restClient=t,this.currentUserService=e,this.serviceSubUrl="v1/passen"}findByWettkampfId(t){return new Promise((e,a)=>{this.restClient.GET((new f.UriBuilder).fromPath(this.getUrl()).path("findByWettkampfId/wettkampfid="+t).build()).then(t=>{e({result:f.RequestResult.SUCCESS,payload:Object(M.a)(t)})},t=>{a(0===t.status?{result:f.RequestResult.CONNECTION_PROBLEM}:{result:f.RequestResult.FAILURE})})})}findAll(){return new Promise((t,e)=>{this.restClient.GET(this.getUrl()+"/").then(e=>{t({result:f.RequestResult.SUCCESS,payload:Object(M.a)(e)})},t=>{e(0===t.status?{result:f.RequestResult.CONNECTION_PROBLEM}:{result:f.RequestResult.FAILURE})})})}}return t.\u0275fac=function(e){return new(e||t)(d.Sb(f.RestClient),d.Sb(E.a))},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=a("nr0C"),C=a("FlTZ"),v=a("x61S"),w=a("w90F"),k=a("yljE"),F=a("/2r1"),L=a("xOPY"),R=a("sYmb");function y(t,e){if(1&t&&(d.Ob(0,"option",24),d.uc(1),d.Nb()),2&t){const t=e.$implicit;d.dc("ngValue",t),d.xb(1),d.wc(" ",t.name,"")}}function I(t,e){if(1&t&&(d.Ob(0,"option"),d.uc(1),d.Nb()),2&t){const t=e.$implicit;d.xb(1),d.wc(" ",t,"")}}const H=function(t){return[t]};let z=(()=>{class t extends c.CommonComponentDirective{constructor(t,e,a,n,s,i,r,c,l){super(),this.veranstaltungsDataProvider=t,this.vereinDataProvider=e,this.wettkampfDataProviderService=a,this.matchDataProviderService=n,this.passeDataProviderService=s,this.wettkampfErgebnisService=i,this.mannschaftDataProvider=r,this.router=c,this.route=l,this.show=!1,this.directMannschaft=null,this.directWettkampf=null,this.routes=null,this.config=h,this.config_table=o,this.jahre=[],this.vereine=[],this.mannschaften=[],this.veranstaltungen=[],this.currentVeranstaltung=new v.a,this.currentMannschaft=new m.a,this.multipleSelections=!0,this.rows=new Array,this.areVeranstaltungenloading=!0,this.loadingData=!1,this.matches=[],this.wettkaempfe=[],this.passen=[]}ngOnInit(){this.route.params.subscribe(t=>{if(!Object(N.c)(t.id)){const e=t.id;this.directWettkampf=e,this.directMannschaft=e,this.directMannschaft=this.directMannschaft.replace(/-/g," ")}}),this.loadVeranstaltungen()}loadErgebnisse(t){this.rows=[];for(let e=0;e<this.wettkaempfe.length;e++)this.rows.push(Object(c.toTableRows)(this.wettkampfErgebnisService.createErgebnisse(this.currentJahr,t,this.mannschaften,this.currentVeranstaltung,this.matches[e],this.passen[e])))}onSelect(t){this.currentVeranstaltung=t.concat()[0],this.currentJahr=this.currentVeranstaltung.sportjahr,this.jahre[0]=this.currentJahr,this.clear(),this.loadMannschaft(this.currentVeranstaltung.id),this.loadWettkaempfe(this.currentVeranstaltung.id)}clear(){this.matches=[],this.passen=[],this.wettkaempfe=[],this.rows=[]}loadVeranstaltungen(){this.veranstaltungsDataProvider.findAll().then(t=>this.handleSuccessLoadVeranstaltungen(t)).catch(t=>this.veranstaltungen=[])}handleSuccessLoadVeranstaltungen(t){if(this.veranstaltungen=t.payload,null!=this.directWettkampf)for(const e of this.veranstaltungen){if(this.directWettkampf===e.name){this.currentVeranstaltung=e;break}this.currentVeranstaltung=this.veranstaltungen[0]}else this.currentVeranstaltung=this.veranstaltungen[0];this.areVeranstaltungenloading=!1,this.currentJahr=this.currentVeranstaltung.sportjahr,this.loadMannschaft(this.currentVeranstaltung.id),this.loadJahre(),this.loadWettkaempfe(this.currentVeranstaltung.id)}loadMannschaft(t){this.mannschaftDataProvider.findAllByVeranstaltungsId(t).then(t=>this.handleSuccessLoadMannschaft(t)).catch(t=>this.mannschaften===[])}handleSuccessLoadMannschaft(t){if(this.mannschaften=t.payload,null!=this.directMannschaft)for(const e of this.mannschaften)this.directMannschaft===e.name&&(this.mannschaften[0]=e),this.currentMannschaft=this.mannschaften[0];else null!==this.currentMannschaft&&(this.currentMannschaft=this.mannschaften[0])}loadJahre(){for(const t of this.veranstaltungen)!1===this.jahre.includes(t.sportjahr)&&(this.jahre[this.jahre.length]=t.sportjahr)}loadWettkaempfe(t){this.wettkampfDataProviderService.findAllByVeranstaltungId(t).then(t=>this.handleLoadWettkaempfe(t.payload)).catch(t=>this.handleLoadWettkaempfe([]))}handleLoadWettkaempfe(t){this.wettkaempfe=this.wettkaempfe.concat(t);for(let e=0;e<this.wettkaempfe.length;e++)this.loadingData=!0,this.loadMatches(this.wettkaempfe[e].id,e)}loadMatches(t,e){this.matchDataProviderService.findByWettkampfId(t).then(a=>this.handleSuccessLoadMatches(a.payload,t,e)).catch(a=>this.handleSuccessLoadMatches([],t,e))}handleSuccessLoadMatches(t,e,a){this.matches[a]=t,this.loadPassen(e,t,a)}loadPassen(t,e,a){this.passeDataProviderService.findByWettkampfId(t).then(t=>this.handleSuccessLoadPassen(t.payload,e,a)).catch(t=>this.handleSuccessLoadPassen([],e,a))}handleSuccessLoadPassen(t,e,a){this.passen[a]=t,this.rows[a]=Object(c.toTableRows)(this.wettkampfErgebnisService.createErgebnisse(this.currentJahr,void 0,this.mannschaften,this.currentVeranstaltung,e,t)),a===this.wettkaempfe.length-1&&(this.loadingData=!1)}getTitle(){let t="Keine Mannschaft in der Liga";return void 0!==this.currentMannschaft&&(t=this.currentMannschaft.name),t}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(O.a),d.Jb(C.a),d.Jb(A.a),d.Jb(S),d.Jb(T),d.Jb(u),d.Jb(b.a),d.Jb(i.c),d.Jb(i.a))},t.\u0275cmp=d.Db({type:t,selectors:[["bla-mannschaft"]],features:[d.ub],decls:72,vars:57,consts:[[3,"config"],["id","regionenForm",1,"horizontal-form","half-page"],["id","selectVereink"],[1,"row"],[1,"col-sm-1","col-form-label"],[1,"col-sm-8"],[2,"width","50%","height","10em",3,"id","loading","items","selectedItemIds","optionFieldSelector","multipleSelections","onSelect"],["id","selectVerein"],["id","vereine","name","VereinName",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["id","jahr","name","Jahre","disabled","true",1,"form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["id","Button"],[3,"id","onClick"],[1,"col-sm-9"],["id","Table1"],[3,"loading","config","rows"],["id","Table2"],["id","Table3"],["id","Table4"],[1,"form-group","row"],[1,"col-sm-3"],[1,"col-sm-9","button-box"],[3,"ngValue"]],template:function(t,e){1&t&&(d.Ob(0,"bla-common-dialog",0),d.Ob(1,"form",1),d.Ob(2,"h3"),d.uc(3),d.Nb(),d.Ob(4,"h3"),d.uc(5),d.Nb(),d.Ob(6,"div",2),d.Ob(7,"div",3),d.Ob(8,"label",4),d.Ob(9,"span"),d.uc(10),d.Yb(11,"translate"),d.Nb(),d.Nb(),d.Ob(12,"div",5),d.Ob(13,"bla-selectionlist",6),d.Vb("onSelect",(function(t){return e.onSelect(t)})),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(14,"div",7),d.Ob(15,"div",3),d.Ob(16,"label",4),d.Ob(17,"span"),d.uc(18),d.Yb(19,"translate"),d.Nb(),d.Nb(),d.Ob(20,"div",5),d.Ob(21,"select",8),d.Vb("ngModelChange",(function(t){return e.currentMannschaft=t})),d.tc(22,y,2,2,"option",9),d.Nb(),d.Ob(23,"div",10),d.uc(24),d.Yb(25,"translate"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(26,"div",3),d.Ob(27,"label",4),d.Ob(28,"span"),d.uc(29),d.Yb(30,"translate"),d.Nb(),d.Nb(),d.Ob(31,"div",5),d.Ob(32,"select",11),d.Vb("ngModelChange",(function(t){return e.currentJahr=t})),d.tc(33,I,2,1,"option",12),d.Nb(),d.Ob(34,"div",10),d.uc(35),d.Yb(36,"translate"),d.Nb(),d.Nb(),d.Nb(),d.Ob(37,"div",13),d.Ob(38,"bla-button",14),d.Vb("onClick",(function(){return e.loadErgebnisse(e.currentMannschaft)})),d.uc(39),d.Yb(40,"translate"),d.Nb(),d.uc(41," \xa0 "),d.Ob(42,"bla-button",14),d.Vb("onClick",(function(){return e.loadErgebnisse(void 0)})),d.uc(43),d.Yb(44,"translate"),d.Nb(),d.Nb(),d.Ob(45,"div",15),d.Ob(46,"div",10),d.uc(47),d.Yb(48,"translate"),d.Nb(),d.Nb(),d.Ob(49,"div",3),d.Ob(50,"div",16),d.Ob(51,"h3"),d.uc(52),d.Nb(),d.Kb(53,"bla-data-table",17),d.Nb(),d.Nb(),d.Ob(54,"div",3),d.Ob(55,"div",18),d.Ob(56,"h3"),d.uc(57),d.Nb(),d.Kb(58,"bla-data-table",17),d.Nb(),d.Nb(),d.Ob(59,"div",3),d.Ob(60,"div",19),d.Ob(61,"h3"),d.uc(62),d.Nb(),d.Kb(63,"bla-data-table",17),d.Nb(),d.Nb(),d.Ob(64,"div",3),d.Ob(65,"div",20),d.Ob(66,"h3"),d.uc(67),d.Nb(),d.Kb(68,"bla-data-table",17),d.Nb(),d.Nb(),d.Ob(69,"div",21),d.Kb(70,"div",22),d.Kb(71,"div",23),d.Nb(),d.Nb(),d.Nb()),2&t&&(d.dc("config",e.config),d.xb(3),d.vc(e.getTitle()),d.xb(2),d.vc(e.currentVeranstaltung.name),d.xb(5),d.vc(d.Zb(11,39,"MANNSCHAFTEN.MANNSCHAFTEN.FORM.VERANSTALTUNG_NAME.LABEL")),d.xb(3),d.dc("id","quickSearch")("loading",e.areVeranstaltungenloading)("items",e.veranstaltungen)("selectedItemIds",d.hc(55,H,e.currentVeranstaltung.id))("optionFieldSelector","name")("multipleSelections",!e.multipleSelections),d.xb(5),d.vc(d.Zb(19,41,"MANNSCHAFTEN.MANNSCHAFTEN.FORM.MANNSCHAFT_NAME.LABEL")),d.xb(3),d.dc("ngModel",e.currentMannschaft),d.xb(1),d.dc("ngForOf",e.mannschaften),d.xb(2),d.wc(" ",d.Zb(25,43,"MANAGEMENT.REGION_DETAIL.FORM.REGION_TYP.ERROR")," "),d.xb(5),d.vc(d.Zb(30,45,"MANNSCHAFTEN.MANNSCHAFTEN.FORM.SPORTJAHR.LABEL")),d.xb(3),d.dc("ngModel",e.currentJahr),d.xb(1),d.dc("ngForOf",e.jahre),d.xb(2),d.wc(" ",d.Zb(36,47,"MANAGEMENT.REGION_DETAIL.FORM.REGION_TYP.ERROR")," "),d.xb(3),d.dc("id","showResultButton"),d.xb(1),d.wc(" ",d.Zb(40,49,"MANNSCHAFTEN.MANNSCHAFTEN.BUTTONS.ANZEIGEN.LABEL")," "),d.xb(3),d.dc("id","showResultsButton"),d.xb(1),d.wc(" ",d.Zb(44,51,"MANNSCHAFTEN.MANNSCHAFTEN.BUTTONS.ANZEIGENALL.LABEL")," "),d.xb(4),d.wc(" ",d.Zb(48,53,"MANAGEMENT.REGION_DETAIL.FORM.REGION_TYP.ERROR")," "),d.xb(5),d.vc("Wettkampftag 1"),d.xb(1),d.dc("loading",e.loadingData)("config",e.config_table)("rows",e.rows[0]),d.xb(4),d.vc("Wettkampftag 2"),d.xb(1),d.dc("loading",e.loadingData)("config",e.config_table)("rows",e.rows[1]),d.xb(4),d.vc("Wettkampftag 3"),d.xb(1),d.dc("loading",e.loadingData)("config",e.config_table)("rows",e.rows[2]),d.xb(4),d.vc("Wettkampftag 4"),d.xb(1),d.dc("loading",e.loadingData)("config",e.config_table)("rows",e.rows[3]))},directives:[w.a,s.D,s.o,s.p,k.a,s.z,s.n,s.q,n.s,F.a,L.a,s.s,s.C],pipes:[R.d],styles:["#Button[_ngcontent-%COMP%], #showResultButton[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();const B=[{path:"",pathMatch:"full",component:z},{path:"/:id",pathMatch:"full",component:z}];let P=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[n.c,i.g.forChild(B),r.a,s.k]]}),t})()}}]);